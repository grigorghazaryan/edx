(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[0],{"06d1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"bg-transparent no-shadow no-border"},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"row q-col-gutter-sm "},t._l(t.barInfo,(function(e){return a("div",{key:e.id,staticClass:"col-md-2 col-sm-12 col-xs-12"},[a("q-item",{staticClass:"q-pa-none q-ml-xs",staticStyle:{"background-color":"#fff"}},[a("q-item-section",{staticClass:" q-pa-lg q-mr-none text-white",staticStyle:{"background-color":"#fff"},attrs:{side:""}},[a("q-icon",{attrs:{name:"school",color:"deep-orange-6",size:"24px"}})],1),a("q-item-section",{staticClass:"q-ml-none"},[a("q-item-label",{staticClass:"text-grey-7"},[t._v(t._s(e.title))]),a("q-item-label",{staticClass:"text-dark text-h6 text-weight-bolder"},[t._v("$ "+t._s(e.total))])],1)],1)],1)})),0)])],1)},s=[],o=a("bc3a"),n=a.n(o),l=a("a1bc"),d={props:{title:{required:!0,default:1}},data:function(){return{barInfo:null}},methods:{getAllocationBar:function(){var t=this,e={method:"GET",url:l["a"].getAllocationBar+this.title,headers:{Accept:"application/json"}};n()(e).then((function(e){t.barInfo=e.data.totalAllocation}))}},created:function(){this.getAllocationBar()}},r=d,c=a("2877"),p=Object(c["a"])(r,i,s,!1,null,null,null);e["a"]=p.exports},"13af":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"myDialog",attrs:{persistent:""},on:{show:t.onShow,hide:t.onHide},model:{value:t.swDialog,callback:function(e){t.swDialog=e},expression:"swDialog"}},[a("q-card",{style:t.style},[a("q-bar",{staticClass:"q-pa-lg cursor-move",class:t.bgcolor},[a("div",{staticClass:"text-subtitle1 row justify-start items-center"},[t.icon?a("q-icon",{staticClass:"q-mr-sm",staticStyle:{"font-size":"1.5em"},attrs:{name:t.icon,color:t.color}}):t._e(),a("b",[a("span",{class:t.textColor},[t._v(" "+t._s(t.title)+" ")])])],1)]),t._t("default")],2)],1)},s=[],o=(a("c5f6"),{name:"dialogDraggable",props:{draggable:{type:Boolean,default:!0},modelDialog:{type:Boolean,default:!1},title:{type:String,default:"Popup"},width:{type:Number,default:650},icon:{type:String,default:""},color:{type:String,default:"white"},bgcolor:{type:String,default:"edx-modal-header"},textColor:{type:String,default:"edx-modal-header-color"}},data:function(){return{swDialog:!1,target:null,nodeDragg:null}},watch:{modelDialog:function(t){this.swDialog=t}},methods:{onShow:function(){var t=document.getElementsByClassName("q-dialog");this.target=t[0].querySelector(".q-card"),this.nodeDragg=this.target.querySelector(".q-bar"),this.draggable&&this.nodeDragg.addEventListener("mousedown",this.onGrab),this.$emit("onShow")},onHide:function(){this.draggable&&(document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onLetGo),this.nodeDragg.removeEventListener("mousedown",this.onGrab)),this.$emit("onHide")},onDrag:function(t){var e=window.getComputedStyle(this.target);this.target.style.left=parseInt(e.left)+t.movementX+"px",this.target.style.top=parseInt(e.top)+t.movementY+"px"},onLetGo:function(){document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onLetGo)},onGrab:function(){document.addEventListener("mousemove",this.onDrag),document.addEventListener("mouseup",this.onLetGo)}},computed:{style:function(){return"width: "+this.width+"px !important"}}}),n=o,l=(a("757c"),a("2877")),d=Object(l["a"])(n,i,s,!1,null,null,null);e["a"]=d.exports},1626:function(t,e,a){"use strict";var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-sm q-mt-sm q-gutter-sm"},[a("div",{staticClass:"edx-header-parent"},[a("span",{staticClass:"edx-header-text"},[t._v(t._s(t.titleHeader))])]),a("q-table",{staticClass:"overflow-auto my-sticky-column-table",attrs:{data:t.data,columns:t.columns,"row-key":"id",loading:t.loading,"binary-state-sort":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(e){return[a("q-input",{staticClass:"q-mr-md",attrs:{label:"Search",outlines:"",dense:""},on:{keyup:t.keyUpFilter,keydown:t.keyDownFilter},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("q-btn",{staticClass:"q-mr-md edx-add-btn",attrs:{square:"","text-color":"white",icon:"add","no-caps":""},on:{click:function(e){return t.openAllocationModal(t.data[0],0)}}},[t._v("Add")]),a("q-btn",{staticClass:"edx-excel-btn",attrs:{round:"",icon:"mdi-file-excel-box",size:"10px","text-color":"white","no-caps":""},on:{click:t.exportTable}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip"}},[t._v("Export to Excel")])],1),"list"===t.mode?a("q-btn",{staticClass:"q-px-sm",attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}},[a("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:t.$q.platform.is.mobile}},[t._v(t._s(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen")+"\n          ")])],1):t._e(),a("div",{staticClass:"q-pa-sm q-gutter-sm"},[a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this item?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"edx-delete-btn"},on:{click:t.deleteItem}})],1)],1)],1)],1)]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(a){t.isEditAllocation=!0,t.openAllocationModal(e.row,e.rowIndex)}}},[a("q-td",{key:"creation_date",attrs:{props:e}},[e.row[0]?a("div",{staticClass:"cursor-pointer"},[t._v("\n              "+t._s(e.row[0].creation_date)+"\n            ")]):t._e()]),a("q-td",{key:"school",attrs:{props:e}},[a("div",{staticClass:"text-pre-wrap cursor-pointer"},[t._v("\n              "+t._s(e.row.school.label)+"\n            ")])]),t._l(e.row,(function(i){return a("q-td",{key:i.edxName,attrs:{props:e}},[a("div",[t._v("\n              "+t._s(i.amount)+"\n            ")])])})),a("q-td",{key:"status",attrs:{props:e}},[a("q-chip",{staticClass:"cursor-pointer edx-bg-final",attrs:{square:""}},[t._v("\n              "+t._s(e.row.status.abbr)+"\n\n              "),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v(t._s(e.row.status.label))])])],1)],1),a("q-td",{key:"actions",staticStyle:{"min-width":"132px"},attrs:{props:e}},[a("q-fab",{attrs:{padding:"xs",color:"edx-action-btn",icon:"toc","active-icon":"menu_open",direction:"left"},on:{click:function(t){t.stopPropagation()}}},[a("q-fab-action",{attrs:{icon:"delete_forever",color:"edx-delete-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDeleteModal(e.row)}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Delete")])])],1)],1)],1)],2)]}},{key:"bottom",fn:function(){return[a("div",{staticClass:"q-pa-md flex flex-center"},[a("q-pagination",{attrs:{max:t.pages,"direction-links":!0,color:"edx-pagination"},on:{click:function(e){return t.changePagination(t.current)}},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),a("div",{staticClass:"row justify-center items-center"},[a("span",{staticClass:"q-mr-md"},[t._v("Rows Per page")]),a("q-select",{attrs:{dense:"",outlined:"",options:t.rowsPerPageArr},on:{input:t.changeRowsPerPage},model:{value:t.pagination.rowsPerPage,callback:function(e){t.$set(t.pagination,"rowsPerPage",e)},expression:"pagination.rowsPerPage"}})],1)],1)]},proxy:!0}])}),a("dialog-draggable",{attrs:{width:800,modelDialog:t.showAllocationModal,title:"Allocation",icon:"text_format",color:"green"},on:{onHide:function(e){t.showAllocationModal=!1}}},[a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"70vh"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("School")]),t.isEditAllocation?a("div",[t._v(t._s(t.editedItem.school.label))]):a("q-select",{attrs:{outlined:"",dense:"",options:t.schools},model:{value:t.editedItem.school,callback:function(e){t.$set(t.editedItem,"school",e)},expression:"editedItem.school"}})],1)]),a("div",{staticClass:"col-md-6 q-pl-lg"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Status")]),t._v("\n              Preliminary  "),a("q-toggle",{attrs:{label:"Final"},model:{value:t.isFinal,callback:function(e){t.isFinal=e},expression:"isFinal"}})],1)]),t._l(t.editedItem,(function(e){return a("div",{key:e.edxName,staticClass:"q-mb-md col-md-4 q-pr-lg"},[e.allocationFundTemplateId?a("div",[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v(t._s(e.edxName)+" ")]),"1"==e.isInput?a("div",[a("q-input",{attrs:{prefix:"$",outlined:"",dense:""},on:{input:function(a){return t.calculateAllocations(e,t.editedItem)}},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"i.amount"}})],1):t._e(),"1"==e.is_percentage?a("div",[a("q-input",{staticClass:"q-mb-sm",attrs:{prefix:"$",outlined:"",dense:"",readonly:""},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"i.amount"}}),a("q-input",{attrs:{prefix:"%",outlined:"",dense:""},on:{input:function(a){return t.calculateAllocations(e,t.editedItem)}},model:{value:e.percentage,callback:function(a){t.$set(e,"percentage",a)},expression:"i.percentage"}})],1):t._e(),e.rule_input&&e.rule_input.length>1&&"1"!=e.isInput?a("div",[a("q-input",{attrs:{prefix:"$",outlined:"",dense:"",readonly:""},model:{value:e.amount,callback:function(a){t.$set(e,"amount",a)},expression:"i.amount"}})],1):t._e()]):t._e()])})),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Note")]),a("q-input",{attrs:{outlined:"",dense:"",type:"textarea"},model:{value:t.editedItem.note,callback:function(e){t.$set(t.editedItem,"note",e)},expression:"editedItem.note"}})],1)],2)]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),t.isEditAllocation?a("q-btn",{attrs:{flat:"",label:"Save",color:"primary"},on:{click:t.editAllocation}}):a("q-btn",{attrs:{flat:"",label:"Confirm",color:"primary"},on:{click:t.editAllocation}})],1)])],1)],1)},o=[],n=(a("8e6e"),a("8a81"),a("456d"),a("6762"),a("2fdb"),a("ac6a"),a("cadf"),a("06db"),a("f751"),a("c47a")),l=a.n(n),d=(a("7f7f"),a("28a5"),a("b178")),r=a("bc3a"),c=a.n(r),p=a("a1bc"),u=a("13af");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){l()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function g(t,e){var a=void 0!==e?e(t):t;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),'"'.concat(a,'"')}var v=500,f={components:{DialogDraggable:u["a"]},props:{title:{required:!0,default:1}},data:function(){var t,e;return e={titleId:1,confirm:!1,loading:!1,item:"",pages:1,pagination:{rowsPerPage:10},current:1,count:10,showAllocationModal:!1,index:0,oneTime:!0,isEditAllocation:!1,model:"",isFinal:!1,schools:[],selectedSchool:null,schoolYear:"",schoolYears:[]},l()(e,"isFinal",!1),l()(e,"filter",""),l()(e,"mode","list"),l()(e,"editedIndex",-1),l()(e,"editedItem",{}),l()(e,"tempEditedItem",0),l()(e,"defaultItem",{date:"",school:"",instruction:"",profDev:"",totalInstruction:"",familyEngagemenet:"",allocation:""}),l()(e,"columns",[{name:"creation_date",align:"left",label:"Date",field:"creation_date",sortable:!0},(t={name:"school",align:"left",label:"School",field:"school"},l()(t,"field",(function(t){return t.name})),l()(t,"format",(function(t){return"".concat(t)})),l()(t,"sortable",!0),t),{name:"status",align:"left",label:"Status",field:"status",sortable:!0},{name:"actions",align:"left",label:"Actions",field:"actions"}]),l()(e,"data",[]),l()(e,"tempData",[]),l()(e,"barInfo",{}),l()(e,"rowsPerPageArr",["5","10","25","50","75","100"]),e},methods:{addRow:function(){var t,e,a,i=this.editedItem.pdPercentage,s=this.editedItem.totalInstruction,o=this.editedItem.totalInstructionFinal,n=this.editedItem.familyEngagemenet,l=this.editedItem.familyEngagemenetFinal,d=parseFloat(i)/100;e=this.editedItem.allocation?(parseFloat(o)*d).toFixed(2):(parseFloat(s)*d).toFixed(2);var r=(100-parseFloat(i))/100;t=this.editedItem.allocation?(parseFloat(o)*r).toFixed(2):(parseFloat(s)*r).toFixed(2),a=this.editedItem.allocation?(parseFloat(o)+parseFloat(l)).toFixed(2):(parseFloat(s)+parseFloat(n)).toFixed(2);var c={date:this.editedItem.date,school:this.editedItem.school,instruction:t,profDev:e,totalInstruction:s,familyEngagemenet:n,totalInstructionFinal:o,familyEngagemenetFinal:l,allocation:this.editedItem.allocation,pdPercentage:i,total:a,totalPercent:9,notes:this.editedItem.notes};this.editedIndex>-1?Object.assign(this.data[this.editedIndex],c):this.data.unshift(c),this.close()},openDeleteModal:function(t){this.confirm=!0,this.item=t},editItem:function(t){this.editedIndex=this.data.indexOf(t),this.editedItem=Object.assign({},t)},close:function(){var t=this;setTimeout((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}),300)},exportTable:function(){var t=this,e=[this.columns.map((function(t){return g(t.label)}))].concat(this.data.map((function(e){return t.columns.map((function(t){return g("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format)})).join(",")}))).join("\r\n"),a=Object(d["d"])("table-export.csv",e,"text/csv");!0!==a&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},changePagination:function(t){console.log("change pagination"),this.current=t,this.getAllocationByType(1,this.count,t)},changeRowsPerPage:function(){console.log("changeRowsPerPage"),this.count=this.pagination.rowsPerPage,this.current=1,this.getAllocationByType(1,this.count,this.current)},copyRowData:function(t){oldObject=JSON.stringify(this.tempData[t])},detectChange:function(t){this.editedItem=this.tempData[t],console.log(this.editedItem);var e=JSON.parse(oldObject),a=JSON.stringify(this.data[t]);a=JSON.parse(a);var i=_.isEqual(e,a);console.log(i),this.data[t].changed=!i},getToday:function(){var t=new Date,e=t.getUTCMonth()+1,a=t.getUTCDate(),i=t.getUTCFullYear();return i+"-"+e+"-"+a},addNewRow:function(){var t,e=this.getToday(),a=(t={creation_date:e,school:"",total_instruction:0},l()(t,"total_instruction",0),l()(t,"professional_development_percentage",0),l()(t,"family_engagement",0),l()(t,"total",0),l()(t,"status_string","Final"),l()(t,"changed",!0),l()(t,"showEditButton",!1),l()(t,"allocation_type",1),l()(t,"note",""),l()(t,"add",!0),t);this.data.unshift(a),this.editedItem=a},keyUpFilter:function(){console.log("Key up"),clearTimeout(i),i=setTimeout(this.doneTyping,v)},keyDownFilter:function(){console.log("Key down"),clearTimeout(i)},doneTyping:function(){console.log("Typing done!"),(this.filter.length>1||0==this.filter.length)&&(console.log("Send Request..."),this.filterAllocation())},filterAllocation:function(){var t=this;this.loading=!0;var e="",a="";""!=this.filter&&(a+="&search="+this.filter),this.schoolYear&&(a+="&year="+this.schoolYear.id),""!=this.model&&(e="Preliminary"==this.model?"pr":"fn",a+="&status="+e);var i={method:"GET",url:p["a"].filterAllocation+"1?"+a,headers:{Accept:"application/json"}};console.log(i.url),c()(i).then((function(e){t.loading=!1;var a=e.data.allocations;t.pages=e.data.pagesCount;for(var i=0;i<a.length;i++)a[i].changed=!1,a[i].showEditButton=!0,a[i].is_final?a[i].status_string="Final":a[i].status_string="Preliminary"}))},getAllocationByType:function(t,e,a){var i=this;this.loading=!0;var s={method:"GET",url:p["a"].getAllocationByTitle+t+"?limit="+e+"&page="+a,headers:{Accept:"application/json"}};c()(s).then((function(t){var e=t.data.allocations;i.pages=t.data.pagesCount;for(var a=[],s=0;s<e.length;s++){var o={},n=2;e[s]=e[s].sort((function(t,e){return t.order>e.order?1:-1}));for(var l=0;l<e[s].length;l++){var d=e[s][l].templateName;if(e[s][l].edxName=d,1==parseInt(e[s][l].hasRule)){var r=e[s][l].rule_input.split(",");e[s][l].rule_input=r}if(o[l]=e[s][l],0==s&&i.oneTime){var c={name:d,align:"left",label:e[s][l].edxName,field:d,sortable:!0};i.columns.splice(n,0,c),n++}}o.id=e[s][0].allocationId,o.changed=!1,o.add=!1,o.showEditButton=!0,o.allocationTypeId=e[s][0].allocation_id,"1"==e[s][0].final?(o.final=!0,o.status={id:1,label:"Final",abbr:"FN"}):(o.final=!1,o.status={id:0,label:"Preliminary",abbr:"PR"}),o.school={id:e[s][0].schoolId,label:e[s][0].schoolName},o.note=e[s][0].note||"",a.push(o)}i.oneTime=!1,i.data=a,i.tempData=a,i.loading=!1,console.log("fArr=======",a)}))},calculateAllocations:function(t,e){console.log(t);var a=[],i=[],s=[];for(var o in e)e[o].allocationFundTemplateId&&("1"==e[o].isInput&&a.push(e[o]),"1"==e[o].is_percentage&&s.push(e[o]),e[o].rule_input&&e[o].rule_input.length>1&&i.push(e[o]));var n=[a,i,s];n=n.flat(1/0);for(var l=function(t){if("0"==n[t].isInput){if("1"==n[t].is_percentage){console.log("self",n[t]),console.log("Percentage: ",n[t].percentage);var e=0,a=n[t].rule_input[0],i=n.filter((function(t){return t.allocationFundTemplateId==a}));e=i[0].amount*n[t].percentage/100,n[t].amount=e}setTimeout((function(){if(console.log("asdasdasdasdasdasdasdasdasd"),n[t].rule_input&&n[t].rule_input.length>1){for(var e=[],a=0,i=function(a){var i=n.filter((function(e){return e.allocationFundTemplateId==n[t].rule_input[a]}));console.log(i[0],parseFloat(i[0].amount),"itemsssssss======="),e.push(parseFloat(i[0].amount))},s=0;s<n[t].rule_input.length;s++)i(s);console.log("is_addition",e),"1"==n[t].is_addition&&(a=e.reduce((function(t,e){return parseFloat(t)+parseFloat(e)}),0),console.log("+++++",e,a)),"1"==n[t].is_subtraction&&(a=e.reduce((function(t,e){return parseFloat(t)-parseFloat(e)})),console.log("-----",e,a)),n[t].amount=a}}),100)}},d=0;d<n.length;d++)l(d);console.log(n,"FINAL ARR===============")},getSchools:function(){var t=this,e={method:"GET",url:p["a"].getSchools+"?limit=500&page=1",headers:{Accept:"application/json"}};c()(e).then((function(e){for(var a=[],i=0;i<e.data.schools.length;i++){var s={id:e.data.schools[i].id,label:e.data.schools[i].name};a.push(s)}t.schools=a}))},getSchoolYears:function(){var t=this,e={method:"GET",url:p["a"].getSchoolYears,headers:{Accept:"application/json"}};c()(e).then((function(e){for(var a=e.data,i=[],s=0;s<a.length;s++){var o={id:a[s].id,label:a[s].year_name,value:a[s].year_name};i.push(o)}t.schoolYears=i}))},filterAllocationsBySchoolName:function(){},editAllocation:function(){var t=this,e={school_id:this.editedItem.school.id,status_id:this.isFinal?1:0,note:this.editedItem.note,allocation_type_id:parseInt(this.editedItem.allocationTypeId)},a=[];for(var i in this.editedItem)if(this.editedItem[i].allocationFundTemplateId){var s={id:this.editedItem[i].allocationFundTemplateId,value:parseFloat(this.editedItem[i].amount),fundId:this.editedItem[i].fundId};this.editedItem[i].percentage&&(s.percentage=this.editedItem[i].percentage),a.push(s)}if(e.values=a,this.isEditAllocation){var o={method:"PUT",url:"".concat(p["a"].addAllocation).concat(this.editedItem.id),headers:{Accept:"application/json"},data:e};c()(o).then((function(e){t.$q.notify({message:"Allocation updated successfully!",type:"positive"}),t.showAllocationModal=!1,t.getAllocationByType(t.titleId,t.count,t.current)}))}},deleteItem:function(){var t=this,e=this.item,a={method:"DELETE",url:p["a"].getAllocationByTitle+e.id,headers:{Accept:"application/json"}};c()(a).then((function(a){var i=t.data.indexOf(e);t.data.splice(i,1),t.$q.notify({message:a.data,type:"positive"})}))},addSchoolNameToObject:function(){this.editedItem.school_name=this.selectedSchool.label,console.log(this.editedItem)},getTemplate:function(){var t={method:"GET",url:p["a"].getTemplates+this.titleId,headers:{Accept:"application/json"}};c()(t).then((function(t){for(var e=t.data.category.reverse(),a=0;a<e.length;a++)console.log("@@@@"),console.log(e[a]),console.log("@@@@")}))},allocationCalculation:function(t,e,a){if(void 0!=t){var i=t.split(","),s=this.data[e],o=0;for(var n in s)i.includes(s[n]["allocationFundTemplateId"])&&(o+=parseFloat(s[n]["amount"]),a&&(console.log("LLLL",this.editedItem[e]),this.editedItem[e].amount=o));return o.toFixed(2)}},allocationAnotherPercentageCalculation:function(t,e,a,i){var s=this.data[a],o=0;for(var n in s)parseInt(t)==parseInt(s[n]["allocationFundTemplateId"])&&(o=parseFloat(s[n]["amount"])*e/100,i&&(console.log("JJJJ",this.editedItem[a]),this.editedItem[a].amount=o));return o.toFixed(2)},d:function(t){console.log(t),this.editedItem.a=0,console.log(this.editedItem)},openAllocationModal:function(t,e){this.index=e,this.editedItem=h({},t),this.showAllocationModal=!0,this.isFinal=this.editedItem.final,console.log("roe row",t)}},watch:{showAllocationModal:function(){console.log(this.editedItem)},editedItem:function(){console.log(this.editedItem)}},created:function(){this.titleId=this.title,this.getSchools(),this.getAllocationByType(this.titleId,this.count,this.current),this.getSchoolYears()},computed:{titleHeader:function(){var t="";return t=""==this.schoolYear?this.schoolYears[0]&&this.schoolYears[0].value:this.schoolYear.value,"Title I - "+t}}},y=f,b=(a("83a1"),a("2877")),q=Object(b["a"])(y,s,o,!1,null,null,null);e["a"]=q.exports},"20fe":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"bg-transparent no-shadow no-border"},[a("q-card-section",{staticClass:"q-pa-none"},[a("div",{staticClass:"row q-col-gutter-sm "},[a("div",{staticClass:"col-md-3 col-sm-12 col-xs-12"},[a("q-item",{staticClass:"q-pa-none q-ml-xs"},[a("q-item-section",{staticClass:" q-pa-lg q-mr-none text-white",staticStyle:{"background-color":"#fff"},attrs:{side:""}},[a("q-icon",{staticClass:"edx-light-blue",attrs:{name:"test_icon",size:"35px"}})],1),a("q-item-section",{staticClass:"q-ml-none"},[a("q-item-label",{staticClass:"text-grey-7"},[t._v("Total Invoice")]),a("q-item-label",{staticClass:"text-dark text-h6 text-weight-bolder"},[t.barInfo?a("div",[t._v("$ "+t._s(t.barInfo.totalInvoice))]):t._e()])],1)],1)],1),a("div",{staticClass:"col-md-3 col-sm-12 col-xs-12"},[a("q-item",{staticClass:"q-pa-none q-ml-xs"},[a("q-item-section",{staticClass:" q-pa-lg q-mr-none text-white",staticStyle:{"background-color":"#fff"},attrs:{side:""}},[a("q-icon",{staticClass:"edx-light-blue",attrs:{name:"monetization_on",size:"35px"}})],1),a("q-item-section",{staticClass:"q-ml-none"},[a("q-item-label",{staticClass:"text-grey-7"},[t._v("Total Paid")]),a("q-item-label",{staticClass:"text-dark text-h6 text-weight-bolder"},[t.barInfo?a("div",[t._v("$ "+t._s(t.barInfo.totalPaid))]):t._e()])],1)],1)],1),a("div",{staticClass:"col-md-3 col-sm-12 col-xs-12"},[a("q-item",{staticClass:"q-pa-none q-ml-xs"},[a("q-item-section",{staticClass:" q-pa-lg q-mr-none text-white",staticStyle:{"background-color":"#fff"},attrs:{side:""}},[a("q-icon",{staticClass:"edx-light-blue",attrs:{name:"monetization_on",size:"35px"}})],1),a("q-item-section",{staticClass:"q-ml-none"},[a("q-item-label",{staticClass:"text-grey-7"},[t._v("Remaining")]),a("q-item-label",{staticClass:"text-dark text-h6 text-weight-bolder"},[t.barInfo?a("div",[t._v("$ "+t._s(t.barInfo.remaining))]):t._e()])],1)],1)],1),a("div",{staticClass:"col-md-3 col-sm-12 col-xs-12"},[a("q-item",{staticClass:"q-pa-none q-ml-xs"},[a("q-item-section",{staticClass:" q-pa-lg q-mr-none text-white",staticStyle:{"background-color":"#fff"},attrs:{side:""}},[a("q-icon",{staticClass:"edx-light-blue",attrs:{name:"description",size:"35px"}})],1),a("q-item-section",{staticClass:"q-ml-none"},[a("q-item-label",{staticClass:"text-grey-7"},[t._v("Count Invoices")]),a("q-item-label",{staticClass:"text-dark text-h6 text-weight-bolder"},[t.barInfo?a("div",[t._v(t._s(t.barInfo.invoiceCount))]):t._e()])],1)],1)],1)])])],1)},s=[],o=a("bc3a"),n=a.n(o),l=a("a1bc"),d={data:function(){return{barInfo:null}},methods:{getInvoicingBar:function(){var t=this,e={method:"GET",url:l["a"].getInvoiceTotals,headers:{Accept:"application/json"}};n()(e).then((function(e){t.barInfo=e.data.invoiceTotals}))}},created:function(){this.getInvoicingBar()}},r=d,c=a("2877"),p=Object(c["a"])(r,i,s,!1,null,null,null);e["a"]=p.exports},"30fd":function(t,e,a){"use strict";var i=a("7361"),s=a.n(i);s.a},"3f1e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-table",{staticClass:"no-shadow overflow-auto my-sticky-column-table",attrs:{data:t.data,columns:t.columns,"row-key":"id","hide-bottom":"",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"address1",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.address1)+"\n                    ")])]),a("q-td",{key:"address2",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.address2)+"\n                    ")])]),a("q-td",{key:"city",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.city)+"\n                    ")])]),a("q-td",{key:"state",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.state.label)+"\n                    ")])]),a("q-td",{key:"zip",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.zip)+"\n                    ")])]),a("q-td",{key:"phone",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.phone)+"\n                    ")])]),a("q-td",{key:"fax",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.fax)+"\n                    ")])]),a("q-td",{key:"type",attrs:{props:e}},[a("div",{staticClass:"cursor-pointer"},[t._v("\n                        "+t._s(e.row.type.label)+"\n                    ")])]),a("q-td",{key:"action",attrs:{props:e}},[a("q-fab",{attrs:{padding:"xs",color:"edx-action-btn",icon:"keyboard_arrow_up",direction:"up"}},[a("q-fab-action",{staticClass:"q-mr-sm",attrs:{icon:"edit",color:"edx-edit-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openEditAddressPopup(e.row,e.rowIndex)}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Edit")])])],1),a("q-fab-action",{attrs:{icon:"delete_forever",color:"edx-delete-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){t.isDeleteAddressOpened=!0,t.address=e.row}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Delete")])])],1)],1)],1)],1)]}}])}),a("div",{staticClass:"q-mt-md q-mb-sm q-ml-md"},[a("q-btn",{staticClass:"edx-add-btn",attrs:{icon:"add","text-color":"white",round:""},on:{click:function(e){t.isAddAddressOpened=!0}}})],1),a("dialog-draggable",{attrs:{width:600,modelDialog:t.isAddAddressOpened,title:t.edit?"Edit Address":"Add Address"},on:{onHide:function(e){t.isAddAddressOpened=!1}}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-md-12 q-mb-sm"},[a("div",{staticClass:"text-subtitle2"},[t._v("Address Line 1")]),a("q-input",{attrs:{outlined:"",dense:""},model:{value:t.address.address1,callback:function(e){t.$set(t.address,"address1",e)},expression:"address.address1"}})],1)]),a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-md-12 q-mb-sm"},[a("div",{staticClass:"text-subtitle2"},[t._v("Address Line 2")]),a("q-input",{attrs:{outlined:"",dense:""},model:{value:t.address.address2,callback:function(e){t.$set(t.address,"address2",e)},expression:"address.address2"}})],1)]),a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-md-5 q-mb-sm q-pr-sm"},[a("div",{staticClass:"text-subtitle2"},[t._v("City")]),a("q-input",{attrs:{outlined:"",dense:""},model:{value:t.address.city,callback:function(e){t.$set(t.address,"city",e)},expression:"address.city"}})],1),a("div",{staticClass:"col-md-5 q-mb-sm q-pr-sm"},[a("div",{staticClass:"text-subtitle2"},[t._v("State")]),a("q-select",{attrs:{outlined:"",dense:"",options:t.states,label:"State"},model:{value:t.address.state,callback:function(e){t.$set(t.address,"state",e)},expression:"address.state"}})],1),a("div",{staticClass:"col-md-2 q-mb-sm"},[a("div",{staticClass:"text-subtitle2"},[t._v("Zip")]),a("q-input",{attrs:{outlined:"",dense:""},model:{value:t.address.zip,callback:function(e){t.$set(t.address,"zip",e)},expression:"address.zip"}})],1)]),a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-md-12 q-mb-sm"},[a("div",{staticClass:"text-subtitle2"},[t._v("Phone")]),a("q-input",{attrs:{outlined:"",dense:""},model:{value:t.address.phone,callback:function(e){t.$set(t.address,"phone",e)},expression:"address.phone"}})],1)]),a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-md-12 q-mb-sm"},[a("div",{staticClass:"text-subtitle2"},[t._v("Fax")]),a("q-input",{attrs:{outlined:"",dense:""},model:{value:t.address.fax,callback:function(e){t.$set(t.address,"fax",e)},expression:"address.fax"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2"},[t._v("Type")]),a("q-select",{attrs:{outlined:"",dense:"",options:t.types,label:"Type"},model:{value:t.address.type,callback:function(e){t.$set(t.address,"type",e)},expression:"address.type"}})],1)])]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:function(e){t.edit=!1}}}),t.edit?a("q-btn",{attrs:{flat:"",label:"Save",color:"primary"},on:{click:t.editAddress}}):a("q-btn",{attrs:{flat:"",label:"Add",color:"primary"},on:{click:t.addAddress}})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.isDeleteAddressOpened,callback:function(e){t.isDeleteAddressOpened=e},expression:"isDeleteAddressOpened"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this Address?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"edx-delete-btn"}}),a("q-btn",{attrs:{label:"Yes",color:"red"},on:{click:t.removeAddress}})],1)],1)],1)],1)},s=[],o=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("f751"),a("c47a")),n=a.n(o),l=(a("7f7f"),a("bc3a")),d=a.n(l),r=a("a1bc"),c=a("13af");function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){n()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={components:{dialogDraggable:c["a"]},props:{addressData:{required:!0},statesData:{required:!0},type:{required:!0},id:{required:!1}},data:function(){return{data:[],columns:[{name:"address1",align:"left",label:"Address Line 1",field:"address1",sortable:!0},{name:"address2",align:"left",label:"Address Line 2",field:"address2",sortable:!0},{name:"city",align:"left",label:"City",field:"city",sortable:!0},{name:"state",align:"left",label:"State",field:"state",sortable:!0},{name:"zip",align:"left",label:"Zip Code",field:"zip",sortable:!0},{name:"phone",align:"left",label:"Phone",field:"phone",sortable:!0},{name:"fax",align:"left",label:"Fax",field:"fax",sortable:!0},{name:"type",align:"left",label:"Type",field:"type",sortable:!0},{name:"action",align:"left",label:"Actions",field:"action",sortable:!0}],pagination:{rowsPerPage:1e3},isAddAddressOpened:!1,isDeleteAddressOpened:!1,states:[],types:[],address:{address1:"",address2:"",city:"",state:null,zip:"",phone:"",fax:"",type:null},edit:!1}},methods:{getAddressTypes:function(){var t=this;console.log("get addressses types");var e={method:"GET",url:r["a"].getAddressTypes,headers:{Accept:"application/json"}};d()(e).then((function(e){for(var a=e.data.types,i=[],s=0;s<a.length;s++)i.push({id:a[s].id,label:a[s].name});t.types=i})),console.log("asdasdasdasd",this.types)},openEditAddressPopup:function(t,e){this.edit=!0,this.isAddAddressOpened=!0,this.address=u({},t),this.index=e},addAddress:function(){var t,e=this;1==this.type&&(t=r["a"].addSchoolAddress+this.$route.params.id),2==this.type&&(t=r["a"].addCampusAddress+this.id),3==this.type&&(t=r["a"].addVendorAddress+this.$route.params.id);var a={address_line_1:this.address.address1,address_line_2:this.address.address2,city:this.address.city,state_id:this.address.state.id,postal_code:this.address.zip,phone:this.address.phone,fax:this.address.fax,address_type_id:this.address.type.id},i={method:"POST",url:t,headers:{Accept:"application/json"},data:a};d()(i).then((function(t){var a=t.data.address;e.data.push({id:a.id,address1:a.address_line_1,address2:a.address_line_2,city:a.city,state:{id:a.state.id,label:a.state.name},zip:a.postal_code,phone:a.phone,fax:a.fax,type:{id:a.type.id,label:a.type.name}}),e.$q.notify({message:"Address addes successfully!",type:"positive"}),e.isAddAddressOpened=!1}))},editAddress:function(){var t,e=this;t=3==this.type?r["a"].editVendorAddress+this.address.id:r["a"].editAddress+this.address.id;var a={address_line_1:this.address.address1,address_line_2:this.address.address2,city:this.address.city,state_id:this.address.state.id,postal_code:this.address.zip,phone:this.address.phone,fax:this.address.fax,address_type_id:this.address.type.id},i={method:"PUT",url:t,headers:{Accept:"application/json"},data:a};d()(i).then((function(t){var a=t.data.address,i={id:a.id,address1:a.address_line_1,address2:a.address_line_2,city:a.city,state:{id:a.state.id,label:a.state.name},zip:a.postal_code,phone:a.phone,fax:a.fax,type:{id:a.type.id,label:a.type.name}};e.data=Object.assign([],e.data,n()({},e.index,i)),e.$q.notify({message:"Address edited successfully!",type:"positive"}),e.isAddAddressOpened=!1}))},removeAddress:function(){var t,e=this;1==this.type&&(t=r["a"].removeAddress+this.address.id+"/"+this.$route.params.id),2==this.type&&(t=r["a"].removeCampusAddress+this.address.id+"/"+this.id),3==this.type&&(t=r["a"].removeVendorAddress+this.address.id+"/"+this.$route.params.id);var a={method:"DELETE",url:t,headers:{Accept:"application/json"}};d()(a).then((function(t){var a=e.data.indexOf(e.address);e.data.splice(a,1),e.$q.notify({message:"Address Deleted!",type:"positive"}),e.isDeleteAddressOpened=!1}))},clearInputValues:function(){this.address={address1:"",address2:"",city:"",state:null,zip:"",phone:"",fax:"",type:null}}},created:function(){this.states=this.statesData;for(var t=this.addressData,e=[],a=0;a<t.length;a++)e.push({id:t[a].address.id,address1:t[a].address.address_line_1,address2:t[a].address.address_line_2,city:t[a].address.city,state:{id:t[a].address.state&&t[a].address.state.id,label:t[a].address.state&&t[a].address.state.name},zip:t[a].address.postal_code,phone:t[a].address.phone,fax:t[a].address.fax,type:{id:t[a].address.type.id,label:t[a].address.type.name}});this.data=e,this.getAddressTypes()},watch:{isAddAddressOpened:function(t){t||this.clearInputValues()}}},h=m,g=a("2877"),v=Object(g["a"])(h,i,s,!1,null,null,null);e["a"]=v.exports},"438c":function(t,e,a){},"529f":function(t,e,a){},"5f54":function(t,e,a){},"627d":function(t,e,a){"use strict";var i,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-table",{staticClass:"overflow-auto my-sticky-column-table",attrs:{data:t.data,columns:t.columns,loading:t.loading,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(e){return[a("q-input",{staticClass:"q-mr-md",staticStyle:{"min-width":"250px","max-width":"250px"},attrs:{disable:t.showRemainingBalance,outlines:"",dense:"",placeholder:"Search"},on:{keyup:t.keyUpFilter,keydown:t.keyDownFilter},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("q-btn",{staticClass:"q-mr-md edx-add-btn",attrs:{square:"","text-color":"white",icon:"add","no-caps":""},on:{click:t.openNewActivityPopup}},[t._v("\n                Add\n            ")]),a("q-btn",{staticClass:"edx-excel-btn",attrs:{round:"",icon:"mdi-file-excel-box",size:"10px","text-color":"white","no-caps":""},on:{click:t.exportTable}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip"}},[t._v("Export to Excel")])],1),a("q-btn",{staticClass:"edx-ledger-balance-btn q-ml-md",attrs:{round:"",size:"10px",icon:"price_check","no-caps":"",flat:""},on:{click:function(e){t.showRemainingBalance=!0}}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip"}},[t._v("View Ledger Balances")])],1),"list"===t.mode?a("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip",disable:t.$q.platform.is.mobile}},[t._v("\n                    "+t._s(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen")+"\n                ")])],1):t._e(),a("div",{staticClass:"q-pa-sm q-gutter-sm"},[a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this item?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"edx-delete-btn"},on:{click:t.deleteItem}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirmAttendeeModal,callback:function(e){t.confirmAttendeeModal=e},expression:"confirmAttendeeModal"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"edx-delete-btn"},on:{click:t.deleteAttendee}})],1)],1)],1),a("q-dialog",{model:{value:t.addParticipantModal,callback:function(e){t.addParticipantModal=e},expression:"addParticipantModal"}},[a("q-card",{staticStyle:{width:"550px","max-width":"80vw"}},[a("q-card-section",{staticClass:"row",staticStyle:{width:"500px",display:"flex","align-items":"center"}},[a("q-icon",{staticClass:"text-blue q-mr-sm",staticStyle:{"font-size":"2em"},attrs:{name:"perm_identity"}}),a("span",{staticClass:"text-h6",staticStyle:{"line-height":"2.5rem"}},[t._v("Create New Attendee")])],1),a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("q-input",{attrs:{outlined:"",label:"First Name"},model:{value:t.addNewAttendee.firstName,callback:function(e){t.$set(t.addNewAttendee,"firstName",e)},expression:"addNewAttendee.firstName"}})],1),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-input",{attrs:{outlined:"",label:"Last Name"},model:{value:t.addNewAttendee.lastName,callback:function(e){t.$set(t.addNewAttendee,"lastName",e)},expression:"addNewAttendee.lastName"}})],1),a("div",{staticClass:"col-12 q-mt-sm"},[a("q-input",{attrs:{outlined:"",label:"Email"},model:{value:t.addNewAttendee.email,callback:function(e){t.$set(t.addNewAttendee,"email",e)},expression:"addNewAttendee.email"}})],1)])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Add",color:"primary"},on:{click:t.addParticipant}})],1)])],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirmTeacherModal,callback:function(e){t.confirmTeacherModal=e},expression:"confirmTeacherModal"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this item?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"edx-delete-btn"},on:{click:t.deleteTeacherItem}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirmDate,callback:function(e){t.confirmDate=e},expression:"confirmDate"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this item?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"edx-delete-btn"},on:{click:t.deleteDate}})],1)],1)],1)],1)]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(a){return t.openActivityPopup(e.row,e.rowIndex)}}},[a("q-td",{key:"provider",attrs:{props:e}},[e.row.provider?a("div",[t._v("\n                        "+t._s(e.row.provider.label)+"\n                    ")]):t._e()]),a("q-td",{key:"status",attrs:{props:e}},[a("q-icon",{class:t.activityStatusIconColor(e.row.status_uni.id),attrs:{name:t.activityStatusIcon(e.row.status_uni.id)}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip",anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v(t._s(e.row.status_uni.label))])])],1)],1),a("q-td",{key:"approvals",attrs:{props:e}},[a("q-icon",{class:t.approvalStatusIconColor(e.row.approval_status_uni.id),attrs:{name:t.approvalStatusIcon(e.row.approval_status_uni.id)}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip",anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("\n                                "+t._s(e.row.approval_status_uni.label)+"\n                            ")])])],1),a("q-icon",{class:t.approvalTypeIconColor(e.row.approval_type_uni.id),attrs:{name:t.approvalTypeIcon(e.row.approval_type_uni.id)}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip",anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v(t._s(e.row.approval_type_uni.label))])])],1)],1),a("q-td",{key:"PDActivity",staticStyle:{"white-space":"initial",width:"350px","max-width":"350px"},attrs:{props:e}},[a("span",{staticClass:"inline-span"},[t._v(t._s(e.row.activity))])]),a("q-td",{key:"dateOfActivity",style:{maxWidth:"200px",width:"200px"},attrs:{props:e}},[a("span",[t._v("\n                    "+t._s(e.row.activity_date)+"\n                    ")]),a("span",{staticClass:"q-ml-sm"},[e.row.repeat?a("q-icon",{staticClass:"edx-green",staticStyle:{"font-size":"1.5em"},attrs:{name:"autorenew"}}):t._e(),e.row.multi?a("q-icon",{staticClass:"edx-blue",staticStyle:{"font-size":"1.5em"},attrs:{name:"all_inclusive"}}):t._e()],1)]),a("q-td",{key:"noAttending",attrs:{props:e}},[a("div",[t._v("\n\n                        "+t._s(e.row.no_attending)+"\n                        "),a("span",{staticClass:"q-ml-sm"},[a("q-icon",{staticClass:"edx-green",staticStyle:{"font-size":"1.5em"},attrs:{name:"people_alt"}})],1)])]),a("q-td",{key:"amount",attrs:{props:e}},[a("div",[t._v("$ "+t._s(e.row.amount))])]),a("q-td",{key:"type",attrs:{props:e}},[a("q-chip",{attrs:{square:"",color:"edx-bg-m"}},[a("span",[t._v("M")]),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Material")])])],1)],1),a("q-td",{key:"grossPD",attrs:{props:e}},[a("div",[t._v("$ "+t._s((parseFloat(e.row.amount)+parseFloat(e.row.amount*e.row.percentage/100)).toFixed(2)))])]),a("q-td",{key:"RemainingBalance",attrs:{props:e}},[a("div",[t._v("\n                    $ "),a("span",{class:e.row.remainingBalance>0?"text-positive":"text-negative"},[t._v(t._s(e.row.remainingBalance.toFixed(2)))])])]),a("q-td",{key:"actions",staticStyle:{"min-width":"132px"},attrs:{props:e}},[a("q-fab",{attrs:{padding:"xs",color:"edx-action-btn",icon:"toc","active-icon":"menu_open",direction:"left"},on:{click:function(t){t.stopPropagation()}}},[a("q-fab-action",{staticClass:"q-mr-sm",attrs:{icon:"content_copy",color:"edx-duplicate-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDuplicatePopup(e.row)}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Duplicate")])])],1),a("q-fab-action",{attrs:{icon:"delete_forever",color:"edx-delete-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDeleteModal(e.row)}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Delete")])])],1)],1)],1)],1)]}},{key:"bottom",fn:function(){return[a("div",{staticClass:"q-pa-md flex flex-center"},[a("q-pagination",{attrs:{"max-pages":6,max:t.pages,"direction-links":!0,color:"edx-pagination"},on:{click:function(e){return t.changePagination(t.current)}},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),a("div",{staticClass:"row justify-center items-center"},[a("span",{staticClass:"q-mr-md"},[t._v("Rows Per page")]),a("q-select",{attrs:{dense:"",outlined:"",options:t.rowsPerPageArr},on:{input:t.changeRowsPerPage},model:{value:t.pagination.rowsPerPage,callback:function(e){t.$set(t.pagination,"rowsPerPage",e)},expression:"pagination.rowsPerPage"}})],1)],1)]},proxy:!0}])}),a("dialog-draggable",{attrs:{width:900,modelDialog:t.isShowActivityPopup,title:"Material Details",icon:"calendar_today"},on:{onHide:function(e){t.isShowActivityPopup=!1}}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-7 q-pr-lg"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Material Name")]),a("q-input",{attrs:{outlined:"",dense:"",autofocus:""},model:{value:t.editedItem.activity,callback:function(e){t.$set(t.editedItem,"activity",e)},expression:"editedItem.activity"}})],1),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Material Description")]),a("q-input",{attrs:{type:"textarea",outlined:"",dense:"",autofocus:"",rows:"2"},model:{value:t.editedItem.description,callback:function(e){t.$set(t.editedItem,"description",e)},expression:"editedItem.description"}})],1),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Campus")]),a("q-select",{attrs:{outlined:"",dense:"","input-debounce":"0",options:t.optionsCampus},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                                    No results\n                                    ")])],1)]},proxy:!0}]),model:{value:t.editedItem.campus,callback:function(e){t.$set(t.editedItem,"campus",e)},expression:"editedItem.campus"}})],1),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Provider")]),a("q-select",{attrs:{dense:"",outlined:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.optionsSupplier},on:{filter:t.filterSupplier},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                                    No results\n                                    ")])],1)]},proxy:!0}]),model:{value:t.editedItem.provider,callback:function(e){t.$set(t.editedItem,"provider",e)},expression:"editedItem.provider"}})],1),a("div",{staticClass:"row"},[t.editedItem.qtyOptions&&!t.isOptimizeOrders?a("div",{staticClass:"col-md-2 q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("\n                                "+t._s(t.editedItem.qtyOptions.label)+"\n                            ")]),a("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",type:"text",dense:"",autofocus:""},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}}),a("q-popup-edit",{attrs:{title:"Update Quantity",buttons:""},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}},[a("q-select",{staticClass:"q-mb-sm",attrs:{options:t.options,dense:"",outlined:""},model:{value:t.editedItem.qtyOptions,callback:function(e){t.$set(t.editedItem,"qtyOptions",e)},expression:"editedItem.qtyOptions"}}),t.editedItem.qtyOptions&&3!=t.editedItem.qtyOptions.id?a("q-input",{staticClass:"q-mb-sm",attrs:{type:"number",dense:"",autofocus:"",outlined:""},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}}):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("q-input",{staticClass:"q-mb-sm q-pr-sm",attrs:{prefix:"$",type:"number",dense:"",autofocus:"",outlined:""},model:{value:t.editedItem.amount,callback:function(e){t.$set(t.editedItem,"amount",e)},expression:"editedItem.amount"}})],1),a("div",{staticClass:"col-md-4"},[a("q-input",{staticClass:"q-mb-sm",attrs:{prefix:"%",type:"number",dense:"",autofocus:"",outlined:""},model:{value:t.editedItem.percentage,callback:function(e){t.$set(t.editedItem,"percentage",e)},expression:"editedItem.percentage"}})],1)])],1)],1):t._e(),a("div",{staticClass:"col-md-3 q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Amount")]),a("q-input",{staticClass:"q-mb-md",attrs:{prefix:"$",standout:t.isOptimizeOrders,readonly:t.isOptimizeOrders,outlined:!t.isOptimizeOrders,type:"text",dense:"",autofocus:""},model:{value:t.editedItem.amount,callback:function(e){t.$set(t.editedItem,"amount",e)},expression:"editedItem.amount"}}),t.isOptimizeOrders?t._e():a("q-popup-edit",{attrs:{title:"Update Quantity",buttons:""},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}},[a("q-select",{staticClass:"q-mb-sm",attrs:{options:t.options,dense:"",outlined:""},model:{value:t.editedItem.qtyOptions,callback:function(e){t.$set(t.editedItem,"qtyOptions",e)},expression:"editedItem.qtyOptions"}}),t.editedItem.qtyOptions&&3!=t.editedItem.qtyOptions.id?a("q-input",{staticClass:"q-mb-sm",attrs:{type:"number",dense:"",autofocus:"",outlined:""},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}}):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("q-input",{staticClass:"q-mb-sm q-pr-sm",attrs:{prefix:"$",type:"number",dense:"",autofocus:"",outlined:""},model:{value:t.editedItem.amount,callback:function(e){t.$set(t.editedItem,"amount",e)},expression:"editedItem.amount"}})],1),a("div",{staticClass:"col-md-4"},[a("q-input",{staticClass:"q-mb-sm",attrs:{prefix:"%",type:"number",dense:"",autofocus:"",outlined:""},model:{value:t.editedItem.percentage,callback:function(e){t.$set(t.editedItem,"percentage",e)},expression:"editedItem.percentage"}})],1)])],1)],1),a("div",{staticClass:"col-md-3 q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Total")]),a("q-input",{staticClass:"q-mb-md",attrs:{prefix:"$",standout:"",readonly:"",dense:"",autofocus:""},model:{value:t.total,callback:function(e){t.total=e},expression:"total"}})],1),a("div",{staticClass:"col-md-3 q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("w/Markup")]),a("q-input",{staticClass:"q-mb-md",attrs:{prefix:"$",standout:"",readonly:"",type:"text",dense:"",autofocus:""},model:{value:t.totalMarkup,callback:function(e){t.totalMarkup=e},expression:"totalMarkup"}})],1),a("div",{staticClass:"col-md-1 q-pr-sm"},[a("div",{staticClass:"itemize-order-parent"},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[t._v("\n                                    Itemize Order\n                                ")]),a("q-btn",{staticClass:" edx-white",class:t.isOptimizeOrders?"edx-bg-green":"edx-bg-gray",attrs:{round:"",icon:"format_list_numbered"},on:{click:t.openItemizationModal}})],1)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Order Schedule date")])]),a("div",{staticClass:"col-md-6 q-pr-sm"},[a("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"edx-pagination"},model:{value:t.editedItem.start_date,callback:function(e){t.$set(t.editedItem,"start_date",e)},expression:"editedItem.start_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.editedItem.start_date,callback:function(e){t.$set(t.editedItem,"start_date",e)},expression:"editedItem.start_date"}})],1),a("div",{staticClass:"col-md-6 q-pr-sm"},[a("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"edx-pagination"},model:{value:t.editedItem.end_date,callback:function(e){t.$set(t.editedItem,"end_date",e)},expression:"editedItem.end_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.editedItem.end_date,callback:function(e){t.$set(t.editedItem,"end_date",e)},expression:"editedItem.end_date"}})],1)])]),a("div",{staticClass:"col-md-5 q-pl-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 q-pr-sm q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Category")]),a("div",{staticClass:"row cursor-pointer h-popup"},[a("div",[a("q-chip",{attrs:{square:"",color:"edx-bg-m"}},[a("span",[t._v("M")])])],1)])]),a("div",{staticClass:"col-md-3 q-pr-sm q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Subcategory")]),a("div",{staticClass:"row cursor-pointer h-popup"},[t.editedItem.subcategory_uni?a("div",[a("q-chip",{attrs:{square:"",color:"edx-bg-m"}},[a("span",[t._v(t._s(t.editedItem.subcategory_uni.abbr))])])],1):t._e(),a("q-popup-edit",{attrs:{buttons:""},model:{value:t.editedItem.subcategory_uni,callback:function(e){t.$set(t.editedItem,"subcategory_uni",e)},expression:"editedItem.subcategory_uni"}},[a("div",{staticClass:"row  w-100 q-mb-lg q-mt-lg"},[a("div",{staticClass:"col-md-12 q-pr-sm q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Subcategory")]),a("div",{staticClass:"row cursor-pointer h-popup"},[a("q-select",{staticClass:"w-100",attrs:{options:t.optionsSubcategory},model:{value:t.editedItem.subcategory_uni,callback:function(e){t.$set(t.editedItem,"subcategory_uni",e)},expression:"editedItem.subcategory_uni"}})],1)])])])],1)]),t.optionsFundSource.length?a("div",{staticClass:"col-md-6 q-pr-sm q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Fund Source")]),a("div",{staticClass:"row cursor-pointer h-popup"},[t.editedItem.fund_source?a("div",[a("q-chip",{class:t.fundSourceColor(t.editedItem.fund_source.abbr),attrs:{square:""}},[a("span",[t._v(t._s(t.editedItem.fund_source.abbr))]),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v(t._s(t.editedItem.fund_source.label))])])],1)],1):t._e(),a("q-popup-edit",{attrs:{buttons:""},model:{value:t.editedItem.fund_source,callback:function(e){t.$set(t.editedItem,"fund_source",e)},expression:"editedItem.fund_source"}},[a("div",{staticClass:"text-subtitle2"},[t._v("Fund Source")]),a("div",{staticClass:"row q-mb-sm q-mt-sm"},[a("div",{staticClass:"col-md-12 q-pr-sm q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"}),a("div",{staticClass:"row cursor-pointer h-popup"},[a("q-select",{staticClass:"w-100",attrs:{options:t.optionsFundSource,outlined:"",dense:""},model:{value:t.editedItem.fund_source,callback:function(e){t.$set(t.editedItem,"fund_source",e)},expression:"editedItem.fund_source"}})],1)])])])],1)]):t._e()]),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Inventory Category")]),a("q-select",{attrs:{outlined:"",dense:"","input-debounce":"0",options:t.optionsInventoryCategory},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                                            No results\n                                            ")])],1)]},proxy:!0}]),model:{value:t.editedItem.invenotry_category_type,callback:function(e){t.$set(t.editedItem,"invenotry_category_type",e)},expression:"editedItem.invenotry_category_type"}})],1),a("div",{staticClass:"col-md-2 inventory-icon-parent"},[a("div",[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[t._v("\n                                        Add to Inventory\n                                    ")]),a("q-btn",{staticClass:"edx-white",class:t.isInventoryLength?"edx-bg-green":"edx-bg-gray",attrs:{round:"",icon:"inventory"},on:{click:t.openInventoryModal}})],1)])])]),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Tracking Category")]),a("q-select",{attrs:{outlined:"",dense:"","input-debounce":"0",options:t.optionsCategoryTracking},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                                            No results\n                                            ")])],1)]},proxy:!0}]),model:{value:t.editedItem.tracking_category_uni,callback:function(e){t.$set(t.editedItem,"tracking_category_uni",e)},expression:"editedItem.tracking_category_uni"}})],1)])]),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Approval Status")]),t.editedItem.approval_status_uni?a("div",{staticClass:"row h-popup"},[a("div",{staticClass:"row"},[a("div",{staticClass:"q-mr-md cursor-pointer"},[a("q-icon",{staticClass:"q-mr-sm",class:t.approvalStatusIconColor(t.editedItem.approval_status_uni.id),attrs:{name:t.approvalStatusIcon(t.editedItem.approval_status_uni.id)}}),a("span",[t._v(t._s(t.editedItem.approval_status_uni.label))])],1),a("div",{staticClass:"cursor-pointer"},[a("q-icon",{staticClass:"q-mr-sm",class:t.approvalTypeIconColor(t.editedItem.approval_type_uni.id),attrs:{name:t.approvalTypeIcon(t.editedItem.approval_type_uni.id)}}),a("span",[t._v(t._s(t.approvalType(t.editedItem.approval_type_uni.id)))])],1),a("q-popup-edit",{attrs:{title:"Approvals",buttons:""},model:{value:t.editedItem.approval_status_uni,callback:function(e){t.$set(t.editedItem,"approval_status_uni",e)},expression:"editedItem.approval_status_uni"}},[a("div",{staticStyle:{width:"450px !important","max-width":"450px !important"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("q-select",{attrs:{dense:"",outlined:"",options:t.approval},model:{value:t.editedItem.approval_status_uni,callback:function(e){t.$set(t.editedItem,"approval_status_uni",e)},expression:"editedItem.approval_status_uni"}})],1),t.editedItem.approval_type_uni?a("div",{staticClass:"col-md-7 q-ml-md"},[a("q-option-group",{attrs:{options:t.optionsApp,label:"Notifications",type:"radio"},model:{value:t.editedItem.approval_type_uni.id,callback:function(e){t.$set(t.editedItem.approval_type_uni,"id",e)},expression:"editedItem.approval_type_uni.id"}}),a("q-input",{staticClass:"q-mt-md q-mb-lg",attrs:{disable:4!==t.editedItem.approval_type_uni.id,dense:"",outlined:"",label:"Approver Name"},model:{value:t.editedItem.approver,callback:function(e){t.$set(t.editedItem,"approver",e)},expression:"editedItem.approver"}})],1):t._e(),a("q-separator")],1)])])],1)]):t._e()])])]),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"row"},[t.editedItem.status_uni?a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Material Status")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"h-popup cursor-pointer"},[a("q-icon",{staticClass:"q-mr-sm",class:t.activityStatusIconColor(t.editedItem.status_uni.id),staticStyle:{"font-size":"1.5em"},attrs:{name:t.activityStatusIcon(t.editedItem.status_uni.id)}}),a("span",[t._v(t._s(t.editedItem.status_uni.label))])],1),a("q-popup-edit",{attrs:{title:"Material Status",buttons:""},model:{value:t.editedItem.status_uni,callback:function(e){t.$set(t.editedItem,"status_uni",e)},expression:"editedItem.status_uni"}},[a("q-select",{attrs:{outlined:"",dense:"","input-debounce":"0",options:t.optionsStatus},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                                                        No results\n                                                        ")])],1)]},proxy:!0}],null,!1,990659855),model:{value:t.editedItem.status_uni,callback:function(e){t.$set(t.editedItem,"status_uni",e)},expression:"editedItem.status_uni"}})],1)],1)])]):t._e(),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Documents and Tasks")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"h-popup cursor-pointer"},[a("q-icon",{staticClass:"edx-folder q-mr-sm",staticStyle:{"font-size":"2em"},attrs:{name:"folder"},on:{click:t.openDocumentsModal}})],1)])])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.editedItem.status_uni&&"Completed"==t.editedItem.status_uni.label,expression:"editedItem.status_uni && editedItem.status_uni.label == 'Completed' "}],staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Completed On")]),a("q-input",{staticClass:"q-mb-md",attrs:{outlined:"",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"edx-pagination"},model:{value:t.editedItem.completed_date,callback:function(e){t.$set(t.editedItem,"completed_date",e)},expression:"editedItem.completed_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.editedItem.completed_date,callback:function(e){t.$set(t.editedItem,"completed_date",e)},expression:"editedItem.completed_date"}})],1),a("div",{staticClass:"col-md-4 q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Added to Inventory")]),a("div",{staticClass:"h-popup"},[a("div",{staticClass:"cursor-pointer",on:{click:t.toggleIsInInventory}},[0==t.editedItem.is_in_inventory?a("span",[a("q-icon",{staticStyle:{"font-size":"1.7em",color:"red"},attrs:{name:"dangerous"}}),t._v("\n                                                No\n                                            ")],1):a("span",[a("q-icon",{staticStyle:{"font-size":"1.7em",color:"green"},attrs:{name:"done"}}),t._v("\n                                                Yes\n                                            ")],1)])])]),t.editedItem.billing?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Billing Status")]),a("div",{staticClass:"h-popup"},[a("div",{staticClass:"cursor-pointer"},[a("q-icon",{staticStyle:{"font-size":"1.7em",color:"#4daf4f"},attrs:{name:"not_listed_location"}}),t._v(t._s(t.editedItem.billing.label))],1),a("q-popup-edit",{attrs:{title:"Billing Status",buttons:""},model:{value:t.editedItem.billing,callback:function(e){t.$set(t.editedItem,"billing",e)},expression:"editedItem.billing"}},[a("q-select",{attrs:{outlined:"",dense:"","input-debounce":"0",options:t.optionsBilling},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                                                        No results\n                                                        ")])],1)]},proxy:!0}],null,!1,990659855),model:{value:t.editedItem.billing,callback:function(e){t.$set(t.editedItem,"billing",e)},expression:"editedItem.billing"}})],1)],1)]):t._e()])])])]),a("div",{staticClass:"col-md-12 q-mt-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Note")]),a("q-input",{attrs:{dense:"",outlined:"",type:"textarea"},model:{value:t.editedItem.note,callback:function(e){t.$set(t.editedItem,"note",e)},expression:"editedItem.note"}})],1)])])])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),t.isEdit&&!t.isDuplicate?a("q-btn",{attrs:{loading:t.btnLoading,flat:"",label:"Save",color:"primary"},on:{click:t.editActivity}}):t._e(),t.isEdit||t.isDuplicate?t._e():a("q-btn",{attrs:{loading:t.btnLoading,flat:"",label:"Add",color:"primary"},on:{click:t.addActivity}}),t.isDuplicate&&!t.isEdit?a("q-btn",{attrs:{loading:t.btnLoading,flat:"",label:"Duplicate",color:"primary"},on:{click:t.duplicateItem}}):t._e()],1)],1),a("dialog-draggable",{attrs:{width:500,modelDialog:t.isShowAttendingDialog,title:"Activity Attendees",icon:"people_alt"},on:{onHide:function(e){t.isShowAttendingDialog=!1}}},[a("q-card-section",[a("div",[a("q-table",{staticClass:"overflow-auto my-sticky-column-table",attrs:{data:t.editedItem.noAttendingArr&&t.editedItem.noAttendingArr.attendeesData,columns:t.attendeesColumn,"row-key":"id","hide-bottom":"",pagination:t.paginationAttendee},on:{"update:pagination":function(e){t.paginationAttendee=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"no",attrs:{props:e}},[a("q-input",{attrs:{type:"number",dense:"",outlined:"",readonly:e.row.all},on:{input:function(a){return t.selfTitleTeacherCount(e.row.no)}},model:{value:e.row.no,callback:function(a){t.$set(e.row,"no",a)},expression:"props.row.no"}})],1),a("q-td",{key:"type",staticStyle:{width:"200px"},attrs:{props:e}},[a("q-select",{attrs:{dense:"",outlined:"",options:t.teachersTypeArr},on:{input:function(a){return t.changeType(e.row.type)}},model:{value:e.row.type,callback:function(a){t.$set(e.row,"type",a)},expression:"props.row.type"}})],1),a("q-td",{key:"all",attrs:{props:e}},[a("q-checkbox",{model:{value:e.row.all,callback:function(a){t.$set(e.row,"all",a)},expression:"props.row.all"}})],1),a("q-td",{key:"attendeeList",staticClass:"row",staticStyle:{width:"100px"},attrs:{props:e}},[a("div",{on:{click:function(a){e.expand=!e.expand,t.getParticipiant(e.row)}}},[a("q-btn",{attrs:{color:"blue",round:"",dense:"",icon:"perm_identity"}})],1),a("q-btn",{attrs:{icon:"delete_forever",color:"red",round:"",dense:""},on:{click:function(a){return t.openAttendeDeleteModal(e.row)}}})],1)],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],attrs:{props:e}},[a("q-td",{staticClass:"q-td--no-hover",attrs:{colspan:"100%"}},[a("q-input",{staticClass:"q-mt-lg q-mb-sm",attrs:{outlined:"",dense:"",label:"Search"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.openAddParticipantPopup(e)},input:t.searchParticipant},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:t.attendingSearch,callback:function(e){t.attendingSearch=e},expression:"attendingSearch"}}),a("q-list",{staticClass:"q-mb-lg",staticStyle:{height:"195px","overflow-y":"scroll"},attrs:{bordered:"",separator:""}},[t._l(t.attendingTeacherList,(function(e,i){return a("q-item",{key:i},[a("q-item-section",[a("div",{staticClass:"w-100 row justify-between items-center",on:{click:function(a){return t.addAttendee(e)}}},[a("div",{staticClass:"text-subtitle2"},[t._v("\n                                            "+t._s(e.first_name)+"\n                                            "+t._s(e.last_name)+"\n                                            "+t._s(e.email)+"\n                                        ")]),a("q-btn",{attrs:{icon:"delete_forever",color:"red",size:"sm","no-caps":""},on:{click:function(a){return t.openDeleteTeacherModal(e)}}})],1)])],1)})),t.attendingTeacherList.length?t._e():a("div",[a("p",{staticClass:"q-mt-md q-ml-md"},[a("q-icon",{staticStyle:{"font-size":"1.5em"},attrs:{name:"warning"}}),t._v("\n                                        No matching records found \n                                    ")],1)])],2)],1)],1)]}}])}),t.editedItem.noAttendingArr?a("div",[t.editedItem.noAttendingArr.attendeesData.length<t.teachersTypeArr.length?a("q-btn",{staticClass:"q-mt-md",attrs:{round:"",dense:"",color:"secondary",icon:"add"},on:{click:t.addAttRow}}):t._e()],1):t._e()],1)]),a("q-card-actions",{staticClass:"row justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Confirm",color:"primary"},on:{click:t.confirmNoAttending}})],1)],1),a("dialog-draggable",{attrs:{width:850,modelDialog:t.isRemainingPopupOpen,title:"Budgeted Spending",icon:"attach_money"},on:{onHide:function(e){t.isRemainingPopupOpen=!1}}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"row q-mr-lg q-ml-lg q-mb-lg q-mt-lg"},[a("div",{staticClass:"col-md-6 q-pr-sm q-mb-md"}),a("div",{staticClass:"col-md-6 q-pr-sm q-mb-md"},[a("div",{staticClass:"row q-mt-lg"},[a("div",{staticClass:"col-md-9 q-pr-md text-right"},[t._v("Priliminary:")]),a("div",{staticClass:"col-md-3"},[a("b",[t._v("$ "+t._s(t.priliminary))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9 q-pr-md text-right"},[t._v("Available to spend:")]),a("div",{staticClass:"col-md-3"},[a("b",[t._v("$ "+t._s(t.availableToSpend))])])])]),a("div",{staticClass:"col-md-12 q-mt-md"},[a("q-table",{staticClass:"overflow-auto",attrs:{data:t.tdata,columns:t.tcolumns,loading:t.tloading,pagination:t.tpagination},on:{"update:pagination":function(e){t.tpagination=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e}},[a("q-td",{key:"transaction",style:{maxWidth:"350px",width:"350px"},attrs:{props:e}},[a("span",{staticClass:"inline-span"},[t._v("\n                                    "+t._s(e.row.transaction)+"\n                                ")])]),a("q-td",{key:"date",attrs:{props:e}},[t._v("\n                                "+t._s(e.row.date)+"\n                            ")]),a("q-td",{key:"type",attrs:{props:e}},[a("q-chip",{attrs:{square:"",color:"edx-bg-m"}},[a("span",[t._v(t._s(e.row.type))]),a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v(t._s(e.row.type))])])],1)],1),a("q-td",{key:"amount",attrs:{props:e}},[t._v("\n                                $ "+t._s(e.row.amount)+"\n                            ")]),a("q-td",{key:"balance",attrs:{props:e}},[a("div",{class:e.row.balance>0?"edx-green":"edx-red"},[t._v("\n                                    $ "+t._s(e.row.balance.toFixed(2))+"\n                                ")])])],1)]}},{key:"bottom",fn:function(){return[a("div",{staticClass:"q-pa-md flex flex-center"},[a("q-pagination",{attrs:{color:"edx-pagination","max-pages":6,max:t.budgetPages,"direction-links":!0},on:{click:function(e){return t.changeBudgetPagination(t.budgetCurrent)}},model:{value:t.budgetCurrent,callback:function(e){t.budgetCurrent=e},expression:"budgetCurrent"}}),a("div",{staticClass:"row justify-center items-center"},[a("span",{staticClass:"q-mr-md"},[t._v("Rows Per page")]),a("q-select",{attrs:{dense:"",outlined:"",options:t.rowsPerPageArr},on:{input:t.changeBudgetRowsPerPage},model:{value:t.tpagination.rowsPerPage,callback:function(e){t.$set(t.tpagination,"rowsPerPage",e)},expression:"tpagination.rowsPerPage"}})],1)],1)]},proxy:!0}])})],1)])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}})],1)])],1),a("DocumentsPopup",{attrs:{show:t.showDocumentPopup,activity:t.editedItem,isEdit:t.isEdit,categoryId:t.categoryId},on:{togglePopup:t.togglePopup}}),a("AddToInventory",{attrs:{show:t.inventoryModal,id:t.editedItem.id},on:{togglePopup:t.toggleInventoryModal}}),a("ItemizationModal",{attrs:{show:t.showItemizationModal,id:t.editedItem.id,inventoryCategories:t.optionsInventoryCategory},on:{togglePopup:t.toggleItemizationModal}})],1)},o=[],n=(a("6b54"),a("06db"),a("4db1")),l=a.n(n),d=(a("14b9"),a("28a5"),a("f751"),a("7f7f"),a("13af")),r=a("bc3a"),c=a.n(r),p=a("a1bc"),u=a("ec8cb"),m=a("81bc"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dialog-draggable",{attrs:{width:850,modelDialog:t.showPopup,title:"Add to inventory",icon:"money"}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"text-right"},[a("b",[t._v("Total: $ "),a("span",[t._v(t._s(t.total))])])]),a("div",{staticClass:"text-right"},[a("b",[t._v("Total w/Markup: $ "),a("span",[t._v(t._s(t.totalMarkup))])])])]),a("div",{staticClass:"col-md-12 q-mt-md"},[a("q-table",{staticClass:"overflow-auto",attrs:{data:t.data,columns:t.columns,"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e}},[a("q-td",{key:"materialName",attrs:{props:e}},[t._v("\n                                        "+t._s(e.row.materialName)+"\n                                    ")]),a("q-td",{key:"description",attrs:{props:e}},[t._v("\n                                        "+t._s(e.row.description)+"\n                                    ")]),a("q-td",{key:"inventoryCategory",attrs:{props:e}},[t._v("\n                                        "+t._s(e.row.inventoryCategory.label)+"\n                                    ")]),a("q-td",{key:"qty",attrs:{props:e}},[t._v("\n                                        "+t._s(e.row.qty)+"\n                                    ")]),a("q-td",{key:"amount",attrs:{props:e}},[t._v("\n                                        $ "+t._s(e.row.amount)+"\n                                    ")]),a("q-td",{key:"total",attrs:{props:e}},[t._v("\n                                        $ "+t._s(parseInt(e.row.qty)*parseInt(e.row.amount))+"\n                                    ")]),a("q-td",{key:"checked",attrs:{props:e}},[a("q-checkbox",{model:{value:e.row.checked,callback:function(a){t.$set(e.row,"checked",a)},expression:"props.row.checked"}})],1)],1)]}}])})],1)])])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.closePopup}}),a("q-btn",{attrs:{flat:"",label:"Add Selected",color:"primary"},on:{click:t.addToInventory}})],1)])],1)],1)},g=[],v={props:{show:{required:!0},id:{required:!0}},components:{dialogDraggable:d["a"]},data:function(){return{loading:!1,data:[{materialName:"Chromebook",description:"Chromebook",inventoryCategory:{id:1,label:"Technology"},qty:"1",amount:"120.00",total:"120.00",checked:!1},{materialName:"Chromebook",description:"Chromebook",inventoryCategory:{id:1,label:"Technology"},qty:"1",amount:"120.00",total:"120.00",checked:!1}],columns:[{name:"materialName",align:"left",label:"Material Name",field:"materialName",sortable:!0},{name:"description",align:"left",label:"Description",field:"description",sortable:!0},{name:"inventoryCategory",align:"left",label:"Inventory Category",field:"inventoryCategory",sortable:!0},{name:"qty",align:"left",label:"Qty",field:"qty",sortable:!0},{name:"amount",align:"left",label:"Amount",field:"amount",sortable:!0},{name:"total",align:"left",label:"Total",field:"total",sortable:!0},{name:"checked",align:"left",label:"",field:"checked",sortable:!0}]}},methods:{closePopup:function(){this.$emit("togglePopup",!1)},getItemizationLists:function(){var t=this,e={method:"GET",url:"".concat(p["a"].getItemizationListsForInventory).concat(this.id),headers:{Accept:"application/json"}};c()(e).then((function(e){for(var a=[],i=e.data.inventoryItems,s=0;s<i.length;s++){var o,n,l,d;a.push({id:i[s].id,materialName:i[s].name,description:i[s].description,inventoryCategory:{id:null===(o=i[s].inventory_category)||void 0===o?void 0:o.id,label:null===(n=i[s].inventory_category)||void 0===n?void 0:n.name},amount:i[s].unit_cost,qty:i[s].quantity,qtyOptions:{id:null===(l=i[s].unit)||void 0===l?void 0:l.id,label:null===(d=i[s].unit)||void 0===d?void 0:d.abbreviation},percentage:i[s].markup_percentage,checked:null!=i[s].inventory})}t.data=a}))},addToInventory:function(){for(var t=this,e=[],a=0;a<this.data.length;a++)console.log(this.data),this.data[a].checked&&e.push(this.data[a].id);var i={method:"POST",url:p["a"].addItemToInventory+this.id,headers:{Accept:"application/json"},data:{breakdown:e}};c()(i).then((function(e){t.$q.notify({message:"Added!",type:"positive"}),t.closePopup()}))}},computed:{showPopup:function(){return this.show},total:function(){for(var t=0,e=0;e<this.data.length;e++)this.data[e].checked&&(""==t&&(t=0),t+=parseFloat(this.data[e].amount)*parseFloat(this.data[e].qty));return t},totalMarkup:function(){for(var t=0,e=0;e<this.data.length;e++)if(this.data[e].checked){var a=parseFloat(this.data[e].amount)*parseFloat(this.data[e].qty)+parseFloat(this.data[e].amount)*parseFloat(this.data[e].qty)/parseFloat(this.data[e].percentage);isNaN(a)&&(a=0),t+=a}return t}},watch:{show:function(t){this.$emit("togglePopup",t),t&&this.getItemizationLists()}}},f=v,y=a("2877"),b=Object(y["a"])(f,h,g,!1,null,null,null),q=b.exports,_=a("f97d"),w=500,x={name:"MaterialTable",components:{dialogDraggable:d["a"],DialogDraggable:d["a"],DocumentsPopup:m["a"],AddToInventory:q,ItemizationModal:_["a"]},props:{title:{required:!0}},data:function(){return{options:[],isOptimizeOrders:!1,isInventoryLength:!1,showDocumentPopup:!1,inventoryModal:!1,showItemizationModal:!1,mode:"list",tab:"1",categoryId:4,pages:1,current:1,count:10,pagination:{rowsPerPage:10},rowsPerPageArr:["5","10","25","50","75","100"],tdata:[],tcolumns:[{name:"transaction",align:"left",label:"Transaction",field:"transaction",sortable:!0},{name:"date",align:"left",label:"Date",field:"date",sortable:!0},{name:"type",align:"left",label:"Type",field:"type",sortable:!0},{name:"amount",align:"left",label:"Amount",field:"amount",sortable:!0},{name:"balance",align:"left",label:"Balance",field:"balance",sortable:!0}],tloading:!0,priliminary:null,availableToSpend:null,budgetPages:1,budgetCurrent:1,budgetCount:10,allocationFundId:null,tpagination:{rowsPerPage:10},filter:"",schoolYear:null,schoolYears:[],typeModel:"",data:[],columns:[{name:"provider",align:"left",label:"Provider",field:"provider",sortable:!0},{name:"status",align:"left",label:"Status",field:"status",sortable:!0},{name:"approvals",align:"left",label:"Approval",field:"approvals",sortable:!0},{name:"PDActivity",align:"left",label:"Item",sortable:!1},{name:"dateOfActivity",align:"left",label:"Date Of Activity",field:"dateOfActivity",sortable:!0,style:"max-width: 300px",headerStyle:"max-width: 500px"},{name:"noAttending",align:"left",label:"Attendee Summary",field:"noAttending"},{name:"amount",align:"left",label:"Amount",field:"amount"},{name:"type",align:"left",label:"Type",field:"type"},{name:"grossPD",align:"left",label:"Charge",field:"grossPD"},{name:"actions",align:"right",label:"Actions",field:"actions"}],dateOfActivityTableData:[],editedItem:{},loading:!1,btnLoading:!1,isRemainingPopupOpen:!1,isEdit:!0,isDuplicate:!1,isShowActivityPopup:!1,isShowAttendingDialog:!1,isShowAddDate:!1,showRemainingBalance:!1,confirm:!1,confirmAttendeeModal:!1,confirmTeacherModal:!1,isEditSchedule:!1,confirmDate:!1,index:null,optionsStatus:[],optionsCategoryTracking:[],optionsInventoryCategory:[],approval:[],optionsApp:[],typeArr:[],teachersTypeArr:[],optionsSupplier:[],optionsSupplierForFilter:[],optionsCampus:[],optionsSubcategory:[],optionsBilling:[],paginationAttendee:{rowsPerPage:100},attendeesColumn:[{name:"no",align:"left",label:"No",field:"no",sortable:!0},{name:"type",align:"center",label:"Type",field:"type",sortable:!0},{name:"all",align:"left",label:"All",field:"type",sortable:!0},{name:"attendeeList",align:"left",label:"Actions",field:"attendeeList",sortable:!0}],attendeesData:[],item:{},editedIndex:null,attendingTeacherList:[],attendingSearch:"",addParticipantModal:!1,addNewAttendee:{firstName:"",lastName:"",email:""},reg:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/,teacherItem:{},tempDateOfActivity:{startdate:"2020/06/14",endDate:"2020/06/24",time1:"00:00",time2:"00:00",location:"Location...",note:"Note...",repeatEvery:0,repeats:{id:1,label:"Daily",value:"Daily",clean:"Day"},repeatOn:[],repeat:!1,child:!0,attendies:!1,is_full_day:!1},weekDays:[{label:"Sunday",checked:!1},{label:"Monday",checked:!1},{label:"Tuesday",checked:!1},{label:"Wednesday",checked:!1},{label:"Thursday",checked:!1},{label:"Friday",checked:!1},{label:"Saturday",checked:!1}],selectOptionsDayWeekMonth:[],optionsFundSource:[]}},methods:{getItemizationLists:function(){var t=this,e={method:"GET",url:"".concat(p["a"].getItemizationLists).concat(this.editedItem.id),headers:{Accept:"application/json"}};c()(e).then((function(e){e.data.breakdown.length?t.isOptimizeOrders=!0:t.isOptimizeOrders=!1}))},getItemizationListsForInventory:function(){var t=this,e={method:"GET",url:"".concat(p["a"].getItemizationListsForInventory).concat(this.editedItem.id),headers:{Accept:"application/json"}};c()(e).then((function(e){for(var a=e.data.inventoryItems,i=0;i<a.length;i++){if(null!=a[i].inventory){t.isInventoryLength=!0;break}t.isInventoryLength=!1}}))},getUnits:function(){var t=this,e={method:"GET",url:"".concat(p["a"].getUnits),headers:{Accept:"application/json"}};c()(e).then((function(e){console.log("get units",e.data);for(var a=e.data.unity,i=[],s=0;s<a.length;s++)i.push({id:a[s].id,label:a[s].abbreviation});t.options=i}))},openInventoryModal:function(){this.inventoryModal=!0},updateTableList:function(){},filterSupplier:function(t,e){var a=this;e(""!==t?function(){var e=t.toLowerCase();a.optionsSupplier=a.optionsSupplierForFilter.filter((function(t){return null!=t.label&&t.label.toLowerCase().indexOf(e)>-1}))}:function(){a.optionsSupplier=a.optionsSupplier})},togglePopup:function(t){this.showDocumentPopup=t},toggleInventoryModal:function(t){this.inventoryModal=t,t||this.getItemizationListsForInventory()},toggleItemizationModal:function(t){this.showItemizationModal=t,t||this.getItemizationLists()},openDocumentsModal:function(){this.showDocumentPopup=!0},getBudgetBalance:function(t,e,a,i,s){var o=this;this.tloading=!0;var n={method:"GET",url:p["a"].getBudgetBalance+t+"/"+a+"/"+e+"?limit="+i+"&page="+s,headers:{Accept:"application/json"}};c()(n).then((function(t){var e=t.data.budgetInfo,a=[];o.budgetPages=t.data.pagesCount,o.priliminary=t.data.preliminiary,o.availableToSpend=t.data.availableBalance;for(var i=0;i<e.length;i++)a.push({transaction:e[i].name,date:e[i].start_date+" "+e[i].end_date,type:e[i].category&&e[i].category.abbreviation,amount:e[i].unit_total_cost,balance:e[i].balance});o.tdata=a,o.tloading=!1}))},getAllocationFundId:function(t,e){var a=this,i={method:"GET",url:p["a"].allocationFundId+t+"/"+e,headers:{Accept:"application/json"}};c()(i).then((function(t){a.allocationFundId=t.data.allocationFundSource[0].allocation_fund_template_id}))},toggleIsInInventory:function(){1==this.editedItem.is_in_inventory?this.editedItem.is_in_inventory=0:this.editedItem.is_in_inventory=1},exportTable:function(){var t=this,e=[this.columns.map((function(t){return wrapCsvValue(t.label)}))].concat(this.data.map((function(e){return t.columns.map((function(t){return wrapCsvValue("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format)})).join(",")}))).join("\r\n"),a=exportFile("table-export.csv",e,"text/csv");!0!==a&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},activityParsing:function(t,e){for(var a=[],i=0;i<t.length;i++){var s=t[i].start_date,o=t[i].end_date,n=s+" - "+o;null!=t[i].cost?parseFloat(t[i].cost)+parseFloat(t[i].cost)*parseFloat(t[i].upcharge_percentage)/100:0;var l={remainingBalance:0,qtyOptions:{id:t[i].unit?t[i].unit.id:1,label:t[i].unit?t[i].unit.abbreviation:"Qty"},id:t[i].id,description:t[i].description,tracking_category_uni:{id:t[i].traking?t[i].traking.id:null,label:t[i].traking?t[i].traking.name:"N/A"},billing:{id:t[i].billing?t[i].billing.id:null,label:t[i].billing?t[i].billing.name:"N/A"},completed_date:t[i].completed_date,campus:{id:t[i].campus?t[i].campus.id:null,label:t[i].campus?t[i].campus.name:"N/A"},provider:{id:t[i].supplier&&t[i].supplier.id,label:t[i].supplier&&t[i].supplier.short_name},status_uni:{id:t[i].status?t[i].status.id:null,label:t[i].status?t[i].status.name:"N/A"},approval_status_uni:{id:t[i].approval_status.id,label:t[i].approval_status.name},approval_type_uni:{label:t[i].approval_types?t[i].approval_types.name:"",id:t[i].approval_types?t[i].approval_types.id:null,value:t[i].approval_types?t[i].approval_types.id:null},quantity:t[i].quantity?t[i].quantity:0,activity:t[i].name,activity_date:null==s?"TBD":n,no_attending:t[i].attendySummary.count,amount:null!=t[i].cost?t[i].cost:0,percentage:parseInt(t[i].markup_percentage),is_in_inventory:null!=t[i].details&&(t[i].details.is_in_inventory?t[i].details.is_in_inventory:0),start_date:t[i].start_date,end_date:t[i].end_date,type_uni:{id:t[i].category.id,label:t[i].category.name,name:t[i].category.abbreviation},subcategory_uni:{id:t[i].sub_category?t[i].sub_category.id:null,label:t[i].sub_category?t[i].sub_category.name:"NA",abbr:t[i].sub_category?t[i].sub_category.abbreviation:"NA"},invenotry_category_type:{id:t[i].invenotry_category_type?t[i].invenotry_category_type.id:null,label:t[i].invenotry_category_type?t[i].invenotry_category_type.name:"N/A"},note:t[i].note,approver:t[i].approver,charge:t[i].total_cost,repeat:null!=t[i].has_recurring&&t[i].has_recurring,multi:null!=t[i].has_multi_schedule&&t[i].has_multi_schedule,attendies:!1,noAttendingArr:{attendees:"",amount:0,split:!1,attendeesData:[]}};console.log("activity = ",l),a.push(l)}return a},getActivityByType:function(t,e,a,i){var s=this;this.loading=!0;var o={method:"GET",url:p["a"].getActivity+t+"/"+e+"/2?limit="+a+"&page="+i+"&category=4",headers:{Accept:"application/json"}};c()(o).then((function(t){var e=t.data.items,a=t.data.isSchoolAllocationFinal;s.final=a,s.pages=t.data.pagesCount,1==t.data.isSchoolAllocationFinal?s.$emit("final",!0):s.$emit("final",!1);var i=s.activityParsing(e,a);s.data=i,console.log("asdasdjhkgasdkhgasdkjhasd",i),s.loading=!1}))},openNewActivityPopup:function(){this.isEdit=!1,this.isShowActivityPopup=!0,this.isOptimizeOrders=!1,this.isInventoryLength=!1,this.editedItem={qtyOptions:{id:1,label:"Qty"},amount:0,quantity:0,percentage:0,status_uni:{id:null,label:"N/A"},subcategory_uni:{id:null,label:"N/A",abbr:"N/A"},approval_status_uni:{id:1,label:"Approved"},approval_type_uni:{id:1,label:"Needs Assessment",value:1},type_uni:{id:4,label:"M",name:"M"},fund_source:{id:null,label:"N/A",abbr:"N/A"},billing:{id:4,label:"No Billed"},tracking_category_uni:{id:null,label:"N/A"},campus:{id:null,label:"N/A"},provider:{id:null,label:"N/A"},is_in_inventory:0}},addActivity:function(){var t,e=this;this.btnLoading=!0;var a={budget_unit_id:null===(t=this.editedItem.qtyOptions)||void 0===t?void 0:t.id,supplier_id:this.editedItem.provider&&this.editedItem.provider.id,status_id:this.editedItem.status_uni&&this.editedItem.status_uni.id,approval_status_id:this.editedItem.approval_status_uni&&this.editedItem.approval_status_uni.id,approval_type_id:this.editedItem.approval_type_uni&&this.editedItem.approval_type_uni.id,approver:this.editedItem.approver,name:this.editedItem.activity,unit_cost:this.editedItem.amount,category_id:this.editedItem.type_uni&&this.editedItem.type_uni.id,subcategory_id:this.editedItem.subcategory_uni&&this.editedItem.subcategory_uni.id,note:this.editedItem.note,markup_percentage:this.editedItem.percentage,description:this.editedItem.description,campus_id:this.editedItem.campus.id,category_tracking_id:this.editedItem.tracking_category_uni.id,completed_date:"Completed"==this.editedItem.status_uni.label?this.editedItem.completed_date:null,billing_status_id:"Completed"==this.editedItem.status_uni.label?this.editedItem.billing.id:null,is_in_inventory:this.editedItem.is_in_inventory,start_date:this.editedItem.start_date,end_date:this.editedItem.end_date,quantity:this.editedItem.quantity,inventory_category_type_id:this.editedItem.invenotry_category_type.id};a.school_id=this.$route.params.id,a.allocation_type_id=parseInt(this.tab);var i={method:"POST",url:p["a"].addActivity+4,headers:{Accept:"application/json"},data:a};c()(i).then((function(t){e.$q.notify({message:"Activity Added successfully!",type:"positive"}),t.data.items[0]&&(e.btnLoading=!1,e.getActivityByType(e.tab,e.$route.params.id,e.count,e.current),setTimeout((function(){e.isShowActivityPopup=!1}),500))}))},editActivity:function(){var t,e=this;this.btnLoading=!0;var a={budget_unit_id:null===(t=this.editedItem)||void 0===t?void 0:t.id,quantity:this.editedItem.quantity,supplier_id:this.editedItem.provider&&this.editedItem.provider.id,status_id:this.editedItem.status_uni&&this.editedItem.status_uni.id,approval_status_id:this.editedItem.approval_status_uni&&this.editedItem.approval_status_uni.id,approval_type_id:this.editedItem.approval_type_uni&&this.editedItem.approval_type_uni.value,approver:this.editedItem.approver,name:this.editedItem.activity,unit_cost:this.editedItem.amount,category_id:this.editedItem.type_uni&&this.editedItem.type_uni.id,subcategory_id:this.editedItem.subcategory_uni&&this.editedItem.subcategory_uni.id,note:this.editedItem.note,markup_percentage:this.editedItem.percentage,description:this.editedItem.description,campus_id:this.editedItem.campus.id,category_tracking_id:this.editedItem.tracking_category_uni.id,completed_date:"Completed"==this.editedItem.status_uni.label?this.editedItem.completed_date:null,billing_status_id:"Completed"==this.editedItem.status_uni.label?this.editedItem.billing.id:null,is_in_inventory:this.editedItem.is_in_inventory,start_date:this.editedItem.start_date,end_date:this.editedItem.end_date,inventory_category_type_id:this.editedItem.invenotry_category_type.id},i={method:"PUT",url:p["a"].editActivity+this.editedItem.id,headers:{Accept:"application/json"},data:a};c()(i).then((function(t){e.$q.notify({message:"Activity edited successfully!",type:"positive"}),e.btnLoading=!1,e.data[e.index]=e.editedItem,setTimeout((function(){e.isShowActivityPopup=!1}),500)}))},changePagination:function(t){this.current=t,this.getActivityByType(parseInt(this.tab),this.$route.params.id,this.count,t)},changeRowsPerPage:function(){this.count=this.pagination.rowsPerPage,this.current=1,this.getActivityByType(parseInt(this.tab),this.$route.params.id,this.count,this.current)},openDeleteModal:function(t){this.editedItem=t,this.confirm=!0},deleteItem:function(){var t=this,e={method:"DELETE",url:p["a"].deleteActivity+this.editedItem.id,headers:{Accept:"application/json"}};c()(e).then((function(e){var a=t.data.indexOf(t.editedItem);t.data.splice(a,1),t.$q.notify({message:"Activity deleted!",type:"positive"})}))},openDuplicatePopup:function(t){this.isShowActivityPopup=!0,this.isDuplicate=!0,this.isEdit=!1,this.editedItem=t},duplicateItem:function(){this.addActivity()},getSchoolYears:function(){var t=this,e={method:"GET",url:p["a"].getSchoolYears,headers:{Accept:"application/json"}};c()(e).then((function(e){console.log("getSchoolYears",e);for(var a=e.data,i=[],s=0;s<a.length;s++){var o={id:a[s].id,label:a[s].year_name,value:a[s].year_name};i.push(o)}t.schoolYears=i}))},getSchedules:function(t){var e=this;console.log("getSchedules",t);var a={method:"GET",url:p["a"].getSchedules+t,headers:{Accept:"application/json"}};c()(a).then((function(t){for(var a=t.data.schedules,i=[],s=0;s<a.length;s++){var o={id:a[s].id,startdate:a[s].start_date,endDate:a[s].end_date,time1:a[s].start_time,time2:a[s].end_time,location:a[s].location,repeat:1==a[s].is_recurring,is_full_day:1==a[s].is_full_day,repeats:{id:parseInt(a[s].recurrance_type_id),label:a[s].type},repeatsOn:a[s].reapeatDays,repeatsId:a[s].repeatOn,repeatEvery:a[s].every,note:a[s].note,attendies:!1,child:0!=s};i.push(o)}e.dateOfActivityTableData=i}))},getAttdeesById:function(t){var e=this;this.editedItem.noAttendingArr.attendeesData=[];var a={method:"GET",url:p["a"].getAttendeesById+t,headers:{Accept:"application/json"}};c()(a).then((function(t){for(var a=t.data.attendySuumary,i=0;i<a.length;i++){for(var s={id:a[i].id,no:parseInt(a[i].count),type:{id:a[i].type.id,label:a[i].type.type,value:a[i].type.type,disable:!0},all:0!=a[i].is_all,attendeeList:"View"},o=0;o<e.teachersTypeArr.length;o++)e.teachersTypeArr[o].label==a[i].type.type&&(e.teachersTypeArr[o].disable=!0);e.editedItem.noAttendingArr.attendeesData.push(s)}}))},getAtendeeTypes:function(){var t=this,e={method:"GET",url:p["a"].getAtendeeTypes,headers:{Accept:"application/json"}};c()(e).then((function(e){for(var a=e.data.activityAttendyTypes,i=[],s=0;s<a.length;s++){var o={id:a[s].id,label:a[s].type,value:a[s].type,disable:!1};i.push(o)}t.teachersTypeArr=i}))},openActivityPopup:function(t,e){this.isEdit=!0,this.isShowActivityPopup=!0,this.editedItem=t,this.index=e,this.getSchedules(t.id),this.getAttdeesById(t.id),this.getItemizationLists(),this.getItemizationListsForInventory()},getSubcategories:function(t){var e=this,a={method:"GET",url:p["a"].getSubcategories+t,headers:{Accept:"application/json"}};c()(a).then((function(t){console.log("res subcategories",t);for(var a=[],i=t.data.typesCategories,s=0;s<i.length;s++){var o={id:i[s].id,abbr:i[s].abbreviation,label:i[s].name};a.push(o)}e.optionsSubcategory=a}))},getAdditionalInfo:function(t){var e=this,a={method:"GET",url:p["a"].getAdditionalInfoForInventory+"/"+t,headers:{Accept:"application/json"}};c()(a).then((function(t){for(var a=[],i=0;i<t.data.suppliers.length;i++){var s={id:t.data.suppliers[i].id,label:t.data.suppliers[i].short_name,value:t.data.suppliers[i].id};a.push(s)}e.optionsSupplier=a,e.optionsSupplierForFilter=a}))},getCategoryTypes:function(t){var e=this,a={method:"GET",url:p["a"].getCategoryTypes+t+"/2",headers:{Accept:"application/json"}};c()(a).then((function(t){for(var a=t.data.typesCategories,i=[],s=0;s<a.length;s++){var o={id:a[s].id,label:a[s].name,name:a[s].abbreviation};i.push(o)}e.typeArr=i}))},getApprovals:function(){var t=this,e={method:"GET",url:p["a"].getApprovals,headers:{Accept:"application/json"}};c()(e).then((function(e){for(var a=e.data.activityApprovalStatus,i=e.data.activityApprovalTypes,s=[],o=[],n=0;n<a.length;n++){var l={id:a[n].id,label:a[n].name};s.push(l)}for(var d=0;d<i.length;d++){var r={value:i[d].id,label:i[d].name};o.push(r)}t.approval=s,t.optionsApp=o,console.log("optionsApp optionsApp optionsApp",t.optionsApp)}))},showAttendingDialog:function(){this.isShowAttendingDialog=!0,console.log("ROW : ",this.editedItem),this.item=this.editedItem,this.editedIndex=this.data.indexOf(this.editedItem),this.editedItem=Object.assign({},this.editedItem)},addAttRow:function(){var t={id:Math.floor(100*Math.random()),no:0,type:"",all:!1,attendeeList:"View"};this.editedItem.noAttendingArr.attendeesData.push(t)},confirmNoAttending:function(){for(var t=this,e=this.item,a=this.editedItem.noAttendingArr.attendeesData,i=[],s=0;s<a.length;s++){var o={count:a[s].no,type_id:a[s].type.id,is_all:a[s].all};i.push(o)}var n={method:"POST",url:p["a"].addAttendee+e.id,headers:{Accept:"application/json"},data:i};c()(n).then((function(e){console.log("response === ",e.data),t.$q.notify({message:"Attendees added!",type:"positive"})}))},selfTitleTeacherCount:function(t){this.editedItem.noAttendingArr.teacherCount=t},changeType:function(t){var e=this.teachersTypeArr.indexOf(t);this.teachersTypeArr[e].disable=!0},openAttendeDeleteModal:function(t){this.item=t,this.confirmAttendeeModal=!0},deleteAttendee:function(){var t=this,e=this.item,a={method:"DELETE",url:p["a"].removeAttendee+e.id,headers:{Accept:"application/json"}};c()(a).then((function(a){var i=t.editedItem.noAttendingArr.attendeesData.indexOf(e);t.editedItem.noAttendingArr.attendeesData.splice(i,1),t.$q.notify({message:"Deleted Successfuly!",type:"positive"})}));var i=this.teachersTypeArr.indexOf(e.type);this.teachersTypeArr[i].disable=!1},getFunds:function(t){var e=this,a={method:"GET",url:p["a"].getFunds+t,headers:{Accept:"application/json"}};c()(a).then((function(t){console.log("funds",t.data);for(var a=t.data.fundSource,i=[],s=0;s<a.length;s++){var o={id:a[s].id,label:a[s].name,abbr:a[s].abbreviation};i.push(o)}e.optionsFundSource=i}))},getParticipiant:function(t){var e=this;this.attendeeItem=t;var a=t.id,i={method:"GET",url:p["a"].getAttendyParticipant+a,headers:{Accept:"application/json"}};c()(i).then((function(t){console.log("res",t);var a=t.data.attendeeSchool;e.attendingTeacherList=a}))},openAddParticipantPopup:function(){this.addParticipantModal=!0,this.addNewAttendee.firstName="",this.addNewAttendee.lastName="",this.addNewAttendee.email="";for(var t=this.attendingSearch.split(" "),e=0;e<t.length;e++)this.reg.test(t[e])?this.addNewAttendee.email=t[e]:(0==e&&(this.addNewAttendee.firstName=t[0]),1==e&&(this.addNewAttendee.lastName=t[1]))},addParticipant:function(){var t=this,e={searchParties:this.attendingSearch,summary_id:this.attendeeItem.id,type_id:this.attendeeItem.type.id,first_name:this.addNewAttendee.first_name,last_name:this.addNewAttendee.last_name,email:this.addNewAttendee.email},a={method:"POST",url:p["a"].addNewParticipant+this.$route.params.id+"/"+this.item.id,headers:{Accept:"application/json"},data:e};c()(a).then((function(e){t.$q.notify({message:"Participant added!",type:"positive"}),setTimeout((function(){t.addParticipantModal=!1}),1e3)}))},searchParticipant:function(){var t=this,e={method:"GET",url:p["a"].searchParticipant+this.$route.params.id+"?searchParties="+this.attendingSearch,headers:{Accept:"application/json"}};c()(e).then((function(e){t.attendingTeacherList=e.data.participants,console.log("searchParticipant",e.data.participants)}))},openDeleteTeacherModal:function(t){this.teacherItem=t,this.confirmTeacherModal=!0},deleteTeacherItem:function(){var t=this,e=this.item,a={method:"DELETE",url:p["a"].deleteAttendyParticipant+this.teacherItem.id+"/"+e.id,headers:{Accept:"application/json"}};c()(a).then((function(a){var i=t.attendingTeacherList.indexOf(e);t.attendingTeacherList.splice(i,1),t.$q.notify({message:"Deleted!",type:"positive"})}))},addDate:function(){this.isShowAddDate=!0},confirmNewDate:function(){var t=this,e=this.tempDateOfActivity,a=[];if(e.repeatOn.length)for(var i=0;i<e.repeatOn.length;i++)e.repeatOn[i].checked&&a.push(i);var s={start_date:e.startdate,end_date:e.endDate,start_time:e.time1,end_time:e.time2,is_full_day:e.is_full_day,is_recurring:e.repeat,recurrance_type_id:e.repeats.id,day_of_week:a,number_of_occurrences:e.repeatEvery,note:e.note,location:e.location},o={method:"POST",url:p["a"].addSchedule+this.editedItem.id,headers:{Accept:"application/json"},data:s};c()(o).then((function(e){t.getSchedules(t.editedItem.id),t.isShowAddDate=!1,t.$q.notify({message:"Schedule Added!",type:"positive"})}))},editSchedule:function(){var t=this,e=this.tempDateOfActivity,a=[];if(e.repeatOn)for(var i=0;i<e.repeatOn.length;i++)e.repeatOn[i].checked&&a.push(i);var s={start_date:e.startdate,end_date:e.endDate,start_time:e.time1,end_time:e.time2,is_full_day:e.is_full_day,is_recurring:e.repeat,recurrance_type_id:e.repeats.id,day_of_week:a,number_of_occurrences:e.repeatEvery,note:e.note,location:e.location},o={method:"PUT",url:p["a"].editSchedule+this.tempDateOfActivity.id+"/"+this.editedItem.id,headers:{Accept:"application/json"},data:s};c()(o).then((function(e){t.getSchedules(t.editedItem.id),t.show_dialog_child=!1,t.$q.notify({message:"Schedule Edited!",type:"positive"})}))},getRcurranceTypes:function(){var t=this,e={method:"GET",url:p["a"].getRcurranceTypes,headers:{Accept:"application/json"}};c()(e).then((function(e){for(var a=e.data.recurranceType,i=[],s=0;s<a.length;s++){var o=void 0;switch(a[s].recurrance_type){case"Daily":o="Day";break;case"Weekly":o="Week";break;case"Monthly":o="Month";break}var n={id:a[s].id,label:a[s].recurrance_type,value:a[s].recurrance_type,clean:o};i.push(n)}t.selectOptionsDayWeekMonth=i}))},repeatOnWeekDayChild:function(t){this.weekDays[t].checked?this.weekDays[t].checked=!1:(this.weekDays[t].checked=!0,this.tempDateOfActivity.repeatOn=l()(this.weekDays))},openEditSchedulePopup:function(t){this.isEditSchedule=!0,t.is_full_day||(t.is_full_day=!1),t.repeat||(t.repeat=!1),this.tempDateOfActivity=t,this.isShowAddDate=!0},openDeleteDate:function(t){this.tempDateOfActivity=t,this.confirmDate=!0},deleteDate:function(){var t=this,e={method:"DELETE",url:p["a"].removeSchedule+this.tempDateOfActivity.id,headers:{Accept:"application/json"}};c()(e).then((function(e){t.getSchedules(t.editedItem.id),t.$q.notify({message:"Deleted!",type:"positive"})}))},filterActivity:function(){var t=this,e="";""!=this.filter&&(e+="&search="+this.filter),this.schoolYear&&(e+="&year="+this.schoolYear.id),""!=this.typeModel&&(e+="&type="+this.typeModel.id);var a={method:"GET",url:p["a"].filterActivity+this.tab+"/"+this.$route.params.id+"/2?"+e,headers:{Accept:"application/json"}};c()(a).then((function(e){t.pages=e.data.pagesCount;var a=e.data.items,i=t.activityParsing(a,t.final);t.data=i,t.tempDataX=i,t.loading=!1}))},keyUpFilter:function(){clearTimeout(i),i=setTimeout(this.doneTyping,w)},keyDownFilter:function(){clearTimeout(i)},doneTyping:function(){(this.filter.length>1||0==this.filter.length)&&(console.log("Send Request..."),this.filterActivity())},getCampueses:function(){var t=this,e={method:"GET",url:p["a"].getCampuses+this.$route.params.id,headers:{Accept:"application/json"}};c()(e).then((function(e){console.log("get campuses",e.data[0].campus);for(var a=e.data[0].campus,i=[{id:null,label:"N/A"}],s=0;s<a.length;s++)i.push({id:a[s].id,label:a[s].name});t.optionsCampus=i}))},getStatus:function(t){var e=this,a={method:"GET",url:p["a"].getActivityStatus+t,headers:{Accept:"application/json"}};c()(a).then((function(t){console.log("get status",t.data);for(var a=t.data.billingStatus,i=[],s=0;s<a.length;s++)i.push({id:a[s].id,label:a[s].name});e.optionsBilling=i;for(var o=t.data.itemStatus,n=[],l=0;l<o.length;l++)n.push({id:o[l].id,label:o[l].name});e.optionsStatus=n}))},getTrackingCategories:function(t,e){var a=this;console.log("TRACKING CATEGORY");var i={method:"GET",url:p["a"].getTrackingCategories+t+"/"+e,headers:{Accept:"application/json"}};c()(i).then((function(t){var e=t.data.categoryTracking,i=[];i.push({id:null,label:"N/A"});for(var s=0;s<e.length;s++)i.push({id:e[s].id,label:e[s].name});a.optionsCategoryTracking=i,console.log("TRACKING CATEGORY",a.optionsCategoryTracking)}))},getInventoryCategories:function(){var t=this,e={method:"GET",url:p["a"].getInventoryCategories,headers:{Accept:"application/json"}};c()(e).then((function(e){console.log(e.data,"asdasdasdasd");for(var a=e.data.invenotoryCategoryType,i=[],s=0;s<a.length;s++)i.push({id:a[s].id,label:a[s].name});t.optionsInventoryCategory=i}))},changeBudgetRowsPerPage:function(){this.budgetCount=this.tpagination.rowsPerPage,this.budgetCurrent=1;var t=parseInt(this.tab),e=this.$route.params.id;this.allocationFundId;this.getBudgetBalance(t,4,e,this.budgetCount,this.current)},changeBudgetPagination:function(t){this.budgetCurrent=t;var e=parseInt(this.tab),a=this.$route.params.id;this.allocationFundId;this.getBudgetBalance(e,4,a,this.count,t)},openItemizationModal:function(){this.showItemizationModal=!0},approvalType:function(t){},activityStatusIcon:function(t){var e=t,a=null;switch(e){case 1:a=u["a"].canceled;break;case 2:a=u["a"].budgeted;break;case 3:a=u["a"].gatheringDocuments;break;case 4:a=u["a"].eeadyForBilling;break;case null:a=u["a"].noAnswer;break}return a},activityStatusIconColor:function(t){var e=t,a=null;switch(e){case 1:a="edx-icon-canceled";break;case 2:a="edx-icon-budgeted";break;case 3:a="edx-icon-gathering-documents";break;case 4:a="edx-icon-ready-for-billing";break;case null:a="edx-icon-no-answer";break}return a},activityTypeIcon:function(t){console.log(t);var e=t,a=null;switch(e){case 1:a=u["a"].online;break;case 2:a=u["a"].onSite;break}return a},activityTypeIconColor:function(t){if(t){var e=t,a=null;switch(e){case 1:a="edx-icon-online";break;case 2:a="edx-icon-on-site";break}return a}},approvalStatusIcon:function(t){if(t){var e=t,a=null;switch(e){case 1:a=u["a"].approved;break;case 2:a=u["a"].declined;break;case 3:a=u["a"].pending;break}return a}},approvalStatusIconColor:function(t){if(t){var e=t,a=null;switch(e){case 1:a="edx-icon-approved";break;case 2:a="edx-icon-declined";break;case 3:a="edx-icon-pending";break}return a}},approvalTypeIcon:function(t){if(t){var e=t,a=null;switch(e){case 1:a=u["a"].needsAssessment;break;case 2:a=u["a"].catalog;break;case 3:a=u["a"].blanketApproval;break;case 4:a=u["a"].preApproval;break}return a}},approvalTypeIconColor:function(t){if(t){var e=t,a=null;switch(e){case 1:a="edx-icon-needs-assassment";break;case 2:a="edx-icon-catalog";break;case 3:a="edx-icon-blanket-approval";break;case 4:a="edx-icon-pre-approval";break}return a}},fundSourceColor:function(t){var e=null;switch(t){case"WR":e="bg-edx-bg-wr";break;case"SH":e="bg-edx-bg-sh";break;case"TPD":e="bg-edx-bg-tpd";break;case"TI":e="bg-edx-bg-ti";break}return e}},watch:{showRemainingBalance:function(t){if(t){this.isRemainingPopupOpen=!0;var e=parseInt(this.tab),a=this.$route.params.id;this.allocationFundId;this.getBudgetBalance(e,4,a,this.count,this.current)}else this.isRemainingPopupOpen=!1},isRemainingPopupOpen:function(t){this.showRemainingBalance=!!t},isShowActivityPopup:function(t){t?(this.getCampueses(),this.getStatus(parseInt(this.tab)),this.getTrackingCategories(this.tab,4)):(this.isEdit=!1,this.isDuplicate=!1)}},created:function(){this.tab=this.title.toString();var t=parseInt(this.tab);this.getActivityByType(t,this.$route.params.id,this.count,this.current),this.getAdditionalInfo(t),this.getCategoryTypes(t),this.getApprovals(),this.getRcurranceTypes(),this.getSubcategories(4),this.getInventoryCategories(),this.getAllocationFundId(t,4),this.getFunds(t),this.getUnits()},computed:{totalMarkup:function(){var t=parseFloat(this.editedItem.amount)*parseFloat(this.editedItem.quantity)+parseFloat(parseFloat(this.editedItem.amount)*parseFloat(this.editedItem.quantity)*this.editedItem.percentage/100);return t?t.toFixed(2):0},total:function(){var t=parseFloat(this.editedItem.quantity)*parseFloat(this.editedItem.amount);return t?t.toFixed(2):0}}},I=x,C=(a("e577"),Object(y["a"])(I,s,o,!1,null,"1bc2fbce",null));e["a"]=C.exports},7122:function(t,e,a){},7361:function(t,e,a){},"757c":function(t,e,a){"use strict";var i=a("c420"),s=a.n(i);s.a},7878:function(t,e,a){},"81bc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dialog-draggable",{attrs:{width:800,modelDialog:t.showPopup,title:"Documents for: "+t.activity.activity,icon:"description"}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Tracking Status")]),a("div",{staticClass:"row q-mt-md q-mb-md"},t._l(t.trackingStatuses,(function(e){return a("div",{key:e.id,staticClass:"cursor-pointer tracking-icon-parent document-popup",on:{click:function(a){t.showTrackingStatusModal=!0,t.sendTrackingStatusToPopup(e)}}},[a("q-icon",{class:e.status?t.color(e.status.id):t.color(0),staticStyle:{"font-size":"2.5em"},attrs:{name:e.icon}}),a("div",{staticClass:"w-100"},[a("q-chip",{staticClass:"m-0 text-white",class:e.status?t.bgcolor(e.status.id):t.bgcolor(0),attrs:{square:"",size:"sm"}},[a("b",[t._v(t._s(e.abbreviation))])])],1)],1)})),0)]),a("div",{staticClass:"col-md-12 q-mb-lg q-mt-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Manage Documents")]),a("q-table",{staticClass:"no-shadow hidden-header overflow-auto",attrs:{data:t.data,columns:t.columns,loading:t.loading,"row-key":"id","hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"name",staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(t){e.expand=!e.expand}}},[a("div",[a("q-icon",{staticClass:"edx-folder",staticStyle:{width:"2em"},attrs:{name:"all_inbox"}}),t._v("\n                                            "+t._s(e.row.name)+"\n                                            "),a("q-icon",{staticClass:"q-ml-sm edx-green",staticStyle:{width:"2em"},attrs:{name:"search"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.openSearchModal(e.row)}}})],1)])],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],attrs:{props:e}},[a("q-td",{staticClass:"p-0",attrs:{colspan:"100%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 child-table"},[a("ToggleTable",{attrs:{update:t.updateToggleTable,trayId:t.activity.id,id:e.row.id}})],1)])])],1)]}}])}),a("br")],1),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Note")]),a("q-input",{attrs:{type:"textarea",outlined:"",dense:""},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)])])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.closePopup}}),a("q-btn",{attrs:{loading:t.loading,flat:"",label:"done",color:"primary"},on:{click:t.addTrackingNote}})],1)])],1),a("TrackingStatusModal",{attrs:{show:t.showTrackingStatusModal,data:t.selectedTrackingStatus,activityId:t.activity.id},on:{togglePopup:t.togglePopup,updateTrackingStatus:t.updateTrackingStatus}}),t.data?a("SearchModal",{attrs:{categories:t.data,selectedDocumentType:t.selectedDocumentType,show:t.searchModal,id:t.activity.id},on:{toggleSearchPopup:t.toggleSearchPopup}}):t._e()],1)},s=[],o=(a("7f7f"),a("13af")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-table",{staticClass:"no-shadow overflow-auto my-sticky-column-table",attrs:{data:t.data,columns:t.columns,"hide-pagination":""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"title",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.title)+"\n                ")]),a("q-td",{key:"category",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.category)+"\n                ")]),a("q-td",{key:"dateUploaded",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.dateUploaded)+"\n                ")]),a("q-td",{key:"uploadedBy",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.uploadedBy)+"\n                ")]),a("q-td",{key:"size",attrs:{props:e}},[t._v("\n                    "+t._s(e.row.size)+"\n                ")]),a("q-td",{key:"note",attrs:{props:e}},[a("q-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.row.note,placement:"top-center",classes:["info"],targetClasses:["it-has-a-tooltip"],offset:19},expression:"{\n                            content: props.row.note,\n                            placement: 'top-center',\n                            classes: ['info'],\n                            targetClasses: ['it-has-a-tooltip'],\n                            offset: 19,\n                        }"}],staticClass:"cursor-pointer",staticStyle:{"font-size":"2em"},attrs:{name:"sticky_note_2",color:"orange"}})],1),a("q-td",{key:"action",attrs:{props:e}},[a("q-btn",{attrs:{icon:t.deleteIcon,color:"edx-delete-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDeleteModal(e.row.id)}}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip",anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Delete")])])],1)],1)],1)]}}])}),a("div",{staticClass:"q-mt-md q-ml-md q-mb-lg"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{icon:"add",size:"sm",color:"blue",round:""},on:{click:t.openUploadModal}}),t._v("\n        Add Document\n    ")],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this document?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{attrs:{label:"Yes",loading:t.loading,color:"edx-delete-btn"},on:{click:t.deleteDocument}})],1)],1)],1),a("UploadDocumentModal",{attrs:{show:t.openUploadDocumentModal,trayId:t.trayId,id:t.id},on:{togglePopup:t.togglePopup,newDocument:t.newDocument}})],1)},l=[],d=a("2b0e"),r=a("e37d"),c=a("ec8cb"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("dialog-draggable",{attrs:{width:600,modelDialog:t.showPopup,title:"Upload Document",icon:"upload_file"}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("File Category")]),a("q-select",{attrs:{outlined:"",options:t.categories,dense:""},model:{value:t.selectedCategory,callback:function(e){t.selectedCategory=e},expression:"selectedCategory"}})],1),a("div",{staticClass:"col-md-8 q-pl-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Title")]),a("q-input",{attrs:{outlined:"",dense:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("div",{staticClass:"col-md-12 q-mt-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Tags")]),a("q-select",{ref:"myChipInput",attrs:{outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","new-value-mode":"add","stack-label":""},model:{value:t.modelMultiple,callback:function(e){t.modelMultiple=e},expression:"modelMultiple"}})],1),a("div",{staticClass:"col-md-12 q-mt-md"},[a("file-pond",{ref:"pond",attrs:{name:"document","label-idle":"Drop document here...","allow-multiple":!1,files:t.myFiles}})],1),a("div",{staticClass:"col-md-12 q-mt-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Note")]),a("q-input",{attrs:{dense:"",outlined:"",type:"textarea"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)])])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.emitClosePopup}}),a("q-btn",{attrs:{flat:"",loading:t.loading,label:"Save",color:"primary"},on:{click:t.addDocument}})],1)])],1)},u=[],m=a("bc3a"),h=a.n(m),g=a("a1bc"),v=a("1501"),f=a.n(v),y=(a("57c8"),a("1942")),b=a.n(y),q=a("2cfc8"),_=a.n(q),w=f()(b.a,_.a),x={components:{dialogDraggable:o["a"],FilePond:w},props:{show:{required:!0},trayId:{required:!0},id:{required:!0}},data:function(){return{loading:!1,selectedCategory:null,categories:[],title:"",myFiles:[],note:"",modelMultiple:[],inputValue:""}},methods:{emitClosePopup:function(){this.$emit("togglePopup",!1)},getCategories:function(){var t=this,e={method:"GET",url:g["a"].getDocumentCategory,headers:{Accept:"application/json"}};h()(e).then((function(e){for(var a=e.data.category,i=[],s=0;s<a.length;s++)i.push({id:a[s].id,label:a[s].name});t.categories=i}))},addDocument:function(){var t=this;this.loading=!0;var e=this.$refs.pond.getFiles(0),a=new FormData;a.append("name",this.title),a.append("description",this.note),a.append("category_id",this.selectedCategory.id),a.append("document",e[0].file),a.append("tags",this.modelMultiple),h.a.post("".concat(g["a"].addDocument).concat(this.trayId,"/").concat(this.id,"/budget"),a).then((function(e){t.loading=!1,console.log("Add document: ",e.data);var a=e.data.file;t.$emit("newDocument",a),t.$emit("togglePopup",!1)})).catch((function(e){t.loading=!1}))}},computed:{showPopup:function(){return this.show}},watch:{show:function(t){this.$emit("togglePopup",t),this.getCategories()}}},I=x,C=(a("e1fa"),a("2877")),k=Object(C["a"])(I,p,u,!1,null,null,null),A=k.exports;d["default"].use(r["a"]);var S={components:{UploadDocumentModal:A},props:{trayId:{required:!0},id:{required:!0},update:{required:!0}},data:function(){return{loading:!1,data:[],columns:[{name:"title",align:"left",label:"Title",field:"title"},{name:"category",align:"left",label:"Category",field:"category"},{name:"dateUploaded",align:"left",label:"Date Uploaded",field:"dateUploaded"},{name:"uploadedBy",align:"left",label:"Uploaded By",field:"uploadedBy"},{name:"size",align:"left",label:"Size",field:"size"},{name:"note",align:"left",label:"Note",field:"note"},{name:"action",align:"left",label:"Action",field:"action"}],confirm:!1,openUploadDocumentModal:!1,documentId:null}},methods:{openDeleteModal:function(t){this.confirm=!0,this.documentId=t},deleteDocument:function(){var t=this;this.loading=!0;var e={method:"DELETE",url:g["a"].deleteDocument+this.documentId,headers:{Accept:"application/json"}};h()(e).then((function(e){t.loading=!1,t.confirm=!1,t.getDocuments()})).catch((function(e){t.loading=!1,t.confirm=!1}))},openUploadModal:function(){this.openUploadDocumentModal=!0},togglePopup:function(t){this.openUploadDocumentModal=t},bytesToSize:function(t){var e=["Bytes","KB","MB","GB","TB"];if(0==t)return"0 Byte";var a=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,a),2)+" "+e[a]},getDocuments:function(){var t=this,e={method:"GET",url:"".concat(g["a"].documentsByTray).concat(this.trayId,"/").concat(this.id,"/budget"),headers:{Accept:"application/json"}};h()(e).then((function(e){for(var a=e.data.file,i=[],s=0;s<a.length;s++){var o;i.push({id:a[s].document.id,title:a[s].document.name,category:null===(o=a[s].document.document_category)||void 0===o?void 0:o.name,dateUploaded:a[s].uploaded_date,uploadedBy:a[s].document.uploaded_by,size:t.bytesToSize(a[s].document.size),note:a[s].document.description})}t.data=i}))},newDocument:function(t){this.getDocuments()}},created:function(){this.getDocuments()},computed:{deleteIcon:function(){return c["a"].delete}},watch:{update:function(t){t&&this.getDocuments()}}},T=S,D=(a("83fb"),Object(C["a"])(T,n,l,!1,null,null,null)),P=D.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-dialog",{model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[a("q-card",[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-width":"400px","max-height":"60vh"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 q-mb-md"},[t.data?a("div",{staticClass:"row justify-start "},[a("div",{staticClass:"icon-parent w-100"},[a("div",[a("q-icon",{class:t.color(),staticStyle:{"font-size":"4em"},attrs:{name:t.data.icon}})],1),a("div",{staticClass:"text-center w-100"},[a("q-chip",{staticClass:"m-0 text-white",class:t.bgcolor(),attrs:{square:"",size:"sm"}},[a("b",[t._v(t._s(t.abbr))])])],1)]),a("div",{staticClass:"text-h6 q-ml-md"},[a("div",{staticClass:"q-mt-md"},[t._v(t._s(t.data.name))])])]):t._e()]),a("div",{staticClass:"col-md-12 q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Status")]),a("q-select",{attrs:{options:t.documentsStatusOptions,dense:"",outlined:""},model:{value:t.selectedStatus,callback:function(e){t.selectedStatus=e},expression:"selectedStatus"}})],1),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Note")]),a("q-input",{attrs:{dense:"",outlined:"",type:"textarea"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)])])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.emitClosePopup}}),a("q-btn",{attrs:{flat:"",label:"Save",loading:t.loading,color:"primary"},on:{click:t.addTrackingStatus}})],1)])],1)],1)],1)},M=[],j={components:{dialogDraggable:o["a"]},data:function(){return{loading:!1,note:"",documentsStatusOptions:[],selectedStatus:null}},props:{show:{required:!0},data:{required:!0},activityId:{required:!0}},methods:{emitClosePopup:function(){this.$emit("togglePopup",!1)},addTrackingStatus:function(){var t=this;this.loading=!0;var e={method:"POST",url:g["a"].addTrackingStatus+this.activityId,headers:{Accept:"application/json"},data:{id:this.data.id,note:this.note,status:this.selectedStatus.id}};h()(e).then((function(e){t.loading=!1,t.$emit("updateTrackingStatus",e.data),t.emitClosePopup()})).catch((function(e){t.loading=!1}))},getDocumentsStatus:function(){var t=this,e={method:"GET",url:g["a"].getDocumentsStatus,headers:{Accept:"application/json"}};h()(e).then((function(e){for(var a=[],i=e.data.documentStatus,s=0;s<i.length;s++)a.push({id:i[s].id,label:i[s].name});t.documentsStatusOptions=a}))},color:function(){var t="";switch(this.selectedStatus.id){case 1:t="edx-red";break;case 2:t="edx-green";break;case 3:t="edx-yellow";break;case 4:t="edx-gray";break;default:t="edx-gray";break}return t},bgcolor:function(){var t="";switch(this.selectedStatus.id){case 1:t="edx-bg-red";break;case 2:t="edx-bg-green";break;case 3:t="edx-bg-yellow";break;case 4:t="edx-bg-gray";break;default:t="edx-bg-gray";break}return t}},computed:{showPopup:function(){return this.show},abbr:function(){return this.data.abbreviation}},watch:{show:function(t){this.$emit("togglePopup",t),t&&(this.getDocumentsStatus(),this.note=this.data.note,this.data.status?this.selectedStatus={id:this.data.status.id,label:this.data.status.name}:this.selectedStatus={id:null,label:null})}}},O=j,L=(a("30fd"),Object(C["a"])(O,N,M,!1,null,"46552598",null)),z=L.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dialog-draggable",{attrs:{width:600,modelDialog:t.showPopup,title:"Search Documents",icon:"search"}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Document Trays")]),a("div",{staticClass:"q-mb-md q-pr-sm"},[a("q-select",{attrs:{outlined:"",options:t.categories,dense:""},model:{value:t.selectedStatus,callback:function(e){t.selectedStatus=e},expression:"selectedStatus"}})],1)]),a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Search for..")]),a("div",{staticClass:"q-mb-md"},[a("q-select",{attrs:{outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","stack-label":"",options:t.options},on:{filter:t.filterFn},model:{value:t.modelMultiple,callback:function(e){t.modelMultiple=e},expression:"modelMultiple"}})],1)]),a("div",{staticClass:"col-md-12"},[a("q-table",{staticClass:"overflow-auto",attrs:{data:t.data,columns:t.columns,loading:t.tableLoading,"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(a){return t.openDocumentViewerPopup(e.row.path)}}},[a("q-td",{key:"title",attrs:{props:e}},[a("div",[t._v("\n                                            "+t._s(e.row.title)+"\n                                        ")])]),a("q-td",{key:"date",attrs:{props:e}},[a("div",[t._v("\n                                           "+t._s(e.row.date)+"\n                                        ")])]),a("q-td",{key:"uploadedBy",attrs:{props:e}},[a("div",[t._v("\n                                           "+t._s(e.row.uploadedBy)+"\n                                        ")])]),a("q-td",{key:"size",attrs:{props:e}},[a("div",[t._v("\n                                            "+t._s(e.row.size)+"\n                                        ")])]),a("q-td",{key:"note",attrs:{props:e}},[a("div",[a("q-icon",{staticClass:"cursor-pointer",staticStyle:{"font-size":"2em"},attrs:{name:"sticky_note_2",color:"orange"}})],1)]),a("q-td",{key:"selected",attrs:{props:e}},[a("div",[a("q-checkbox",{attrs:{dense:""},model:{value:e.row.selected,callback:function(a){t.$set(e.row,"selected",a)},expression:"props.row.selected"}})],1)])],1)]}}])})],1)])])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.emitClosePopup}}),a("q-btn",{attrs:{flat:"",label:"Add",loading:t.loading,color:"primary"},on:{click:t.add}})],1)])],1),a("DocumentViewer",{attrs:{show:t.showDocumentViewerPopup,type:t.type,value:t.value},on:{togglePopup:t.togglePopup}})],1)},$=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dialog-draggable",{attrs:{width:800,modelDialog:t.showPopup,title:"View Document",icon:"description"}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"85vh",height:"85vh"}},[a("div",[a("VueDocPreview",{attrs:{value:t.value,type:t.type}})],1)]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.closePopup}})],1)])],1)],1)},B=[],G=a("e8c3"),Y=a.n(G),R={props:{show:{required:!0},type:{required:!0},value:{required:!0}},data:function(){return{}},components:{dialogDraggable:o["a"],VueDocPreview:Y.a},methods:{closePopup:function(){this.$emit("togglePopup",!1)}},computed:{showPopup:function(){return this.show}},watch:{show:function(t){this.$emit("togglePopup",t),t&&(console.log("if val",this.val),console.log("if val",this.type))}}},U=R,Z=Object(C["a"])(U,F,B,!1,null,null,null),V=Z.exports,J={components:{dialogDraggable:o["a"],DocumentViewer:V},data:function(){return{loading:!1,tableLoading:!1,data:[],columns:[{name:"title",align:"left",label:"Title",field:"title",sortable:!1},{name:"date",align:"left",label:"Date",field:"date",sortable:!1},{name:"uploadedBy",align:"left",label:"Uploaded By",field:"uploadedBy",sortable:!1},{name:"size",align:"left",label:"Size",field:"size",sortable:!1},{name:"note",align:"left",label:"Note",field:"note",sortable:!1},{name:"selected",align:"left",label:"",field:"selected",sortable:!1}],selectedStatus:"",modelMultiple:[],options:[],showDocumentViewerPopup:!1,value:null,type:null}},props:{show:{required:!0},categories:{required:!0},selectedDocumentType:{required:!0},id:{required:!0}},methods:{add:function(){var t=this;this.loading=!0;var e=[];if(this.data.length)for(var a=0;a<this.data.length;a++)this.data[a].selected&&e.push(this.data[a].id);var i={method:"POST",url:"".concat(g["a"].addDocumentToExistingItem).concat(this.id,"/").concat(this.selectedStatus.id,"/budget"),headers:{Accept:"application/json"},data:{documentids:e}};h()(i).then((function(e){t.emitClosePopup()})).catch((function(e){t.emitClosePopup()})),this.loading=!1},emitClosePopup:function(){this.$emit("toggleSearchPopup",!1)},bytesToSize:function(t){var e=["Bytes","KB","MB","GB","TB"];if(0==t)return"0 Byte";var a=parseInt(Math.floor(Math.log(t)/Math.log(1024)));return Math.round(t/Math.pow(1024,a),2)+" "+e[a]},documentType:function(t){return/[.]/.exec(t)?/[^.]+$/.exec(t):void 0},documentByTagId:function(t){var e=this,a={method:"GET",url:g["a"].documentByTagId+t,headers:{Accept:"application/json"}},i=[];h()(a).then((function(t){console.log("RES DATAAAA",t.data);for(var a=t.data.document,s=0;s<a.length;s++)for(var o=0;o<a[s].length;o++)i.push({id:a[s][o].document.id,path:a[s][o].document.location,title:a[s][o].document.name,date:a[s][o].document.uploaded_date.substring(0,10),uploadedBy:a[s][o].document.uploaded_by,size:e.bytesToSize(a[s][o].document.size),note:a[s][o].document.description,selected:!1});e.data=i}))},filterFn:function(t,e,a){var i=this;e((function(){if(t){var e=t.toLowerCase(),a=[],s={method:"GET",url:g["a"].searchTag+e,headers:{Accept:"application/json"}};h()(s).then((function(t){for(var e=0;e<t.data.tags.length;e++)a.push({id:t.data.tags[e].id,label:t.data.tags[e].name});i.options=a}))}}))},openDocumentViewerPopup:function(t){var e=this.documentType(t);"docx"==e||"xlsx"==e||"pptx"==e?(this.value=t,this.type="office",this.showDocumentViewerPopup=!0):window.open(t,"_blank")},togglePopup:function(t){this.showDocumentViewerPopup=t}},computed:{showPopup:function(){return this.show}},watch:{show:function(t){this.$emit("toggleSearchPopup",t),t&&(this.data=[],this.modelMultiple=[],this.selectedStatus=this.selectedDocumentType)},modelMultiple:function(t){for(var e="",a=t.length,i=0;i<t.length;i++)e+=i==a-1?t[i].id:t[i].id+",";this.documentByTagId(e)}}},W=J,H=(a("825a"),Object(C["a"])(W,E,$,!1,null,"5f6674e2",null)),Q=H.exports,X={props:{show:{required:!0},activity:{required:!0},isEdit:{required:!0},categoryId:{required:!0}},data:function(){return{loading:!1,data:[],columns:[{name:"name",align:"left",label:"Manage Documents",field:"name",style:"padding-left: 0;"}],trackingStatuses:[],showTrackingStatusModal:!1,selectedTrackingStatus:null,note:"",updateToggleTable:!1,searchModal:!1,selectedDocumentType:null}},components:{dialogDraggable:o["a"],ToggleTable:P,TrackingStatusModal:z,SearchModal:Q},methods:{openSearchModal:function(t){console.log(t,"props row"),this.selectedDocumentType=t,this.searchModal=!0},toggleSearchPopup:function(t){t||(this.updateToggleTable=!0),this.searchModal=t},closePopup:function(){this.$emit("togglePopup",!1)},togglePopup:function(t){this.showTrackingStatusModal=t},getDocumentTrays:function(){var t=this,e={method:"GET",url:g["a"].getDocumentTrays,headers:{Accept:"application/json"}};h()(e).then((function(e){console.log("getDocumentTrays = ",e.data.tray);for(var a=e.data.tray,i=[],s=0;s<a.length;s++)i.push({id:a[s].id,name:a[s].name,label:a[s].name});t.data=i}))},getTrackingStatus:function(){var t=this,e={method:"GET",url:g["a"].getTrackingStatus+this.activity.id,headers:{Accept:"application/json"}};h()(e).then((function(e){t.trackingStatuses=e.data.fields,t.note=e.data.note}))},getTrackingStatusByCategory:function(){var t=this,e={method:"GET",url:g["a"].getTrackingStatusByCategory+this.categoryId,headers:{Accept:"application/json"}};h()(e).then((function(e){t.trackingStatuses=e.data.fields}))},sendTrackingStatusToPopup:function(t){this.selectedTrackingStatus=t},updateTrackingStatus:function(t){this.getTrackingStatus()},addTrackingNote:function(){var t=this;this.loading=!0;var e={method:"POST",url:"".concat(g["a"].addTrackingNote).concat(this.activity.id),headers:{Accept:"application/json"},data:{note:this.note}};h()(e).then((function(e){t.closePopup(),t.loading=!1})).catch((function(e){t.loading=!1}))},color:function(t){var e="";switch(t){case 1:e="edx-red";break;case 2:e="edx-green";break;case 3:e="edx-yellow";break;case 4:e="edx-gray";break;default:e="edx-gray";break}return e},bgcolor:function(t){var e="";switch(t){case 1:e="edx-bg-red";break;case 2:e="edx-bg-green";break;case 3:e="edx-bg-yellow";break;case 4:e="edx-bg-gray";break;default:e="edx-bg-gray";break}return e}},computed:{showPopup:function(){return this.show}},watch:{show:function(t){this.$emit("togglePopup",t),t&&(this.getDocumentTrays(),this.isEdit?this.getTrackingStatus():this.getTrackingStatusByCategory())}}},K=X,tt=(a("81d3"),Object(C["a"])(K,i,s,!1,null,null,null));e["a"]=tt.exports},"81d3":function(t,e,a){"use strict";var i=a("529f"),s=a.n(i);s.a},"825a":function(t,e,a){"use strict";var i=a("438c"),s=a.n(i);s.a},"83a1":function(t,e,a){"use strict";var i=a("7122"),s=a.n(i);s.a},"83fb":function(t,e,a){"use strict";var i=a("8cbc"),s=a.n(i);s.a},"8cbc":function(t,e,a){},a1bc:function(t,e,a){"use strict";var i,s=a("c47a"),o=a.n(s),n="https://edxchange-backend.aimtech.am/api/v1",l=(i={login:n+"/user/sign-in",getMenus:n+"/menu-list?role_id=",getAllocationByTitle:"https://edxchange-allocation.aimtech.am/api/v1/allocations/",addAllocation:"https://edxchange-allocation.aimtech.am/api/v1/allocations/",getTemplates:"https://edxchange-allocation.aimtech.am/api/v1/get-template/",getSchools:"https://edxchange-school.aimtech.am/api/v1/school",getSchoolYears:"https://edxchange-school-year.aimtech.am/api/v1/school-year",getAllocationByYears:"https://edxchange-allocation.aimtech.am/api/v1/allocations-by-school-year/",filterSchool:"https://edxchange-school.aimtech.am/api/v1/filter-school?search=",getSchoolInformationById:"https://edxchange-school.aimtech.am/api/v1/get-school/",addSchoolAddress:"https://edxchange-school.aimtech.am/api/v1/add-school-address/",editSchool:"https://edxchange-school.aimtech.am/api/v1/school/",getAddressTypes:"https://edxchange-school.aimtech.am/api/v1/get-address-types",editAddress:"https://edxchange-school.aimtech.am/api/v1/edit-address/",removeAddress:"https://edxchange-school.aimtech.am/api/v1/remove-school-address/",getSchoolCompuses:"https://edxchange-school.aimtech.am/api/v1/get-school-campuses/",addCampusAddress:"https://edxchange-school.aimtech.am/api/v1/add-campus-address/",removeCampusAddress:"https://edxchange-school.aimtech.am/api/v1/remove-campus-address/",addCampus:"https://edxchange-school.aimtech.am/api/v1/add-campus/",getSchoolContacts:"https://edxchange-school.aimtech.am/api/v1/get-school-contacts/",addSchoolContact:"https://edxchange-school.aimtech.am/api/v1/add-school-contacts/",editSchoolContact:"https://edxchange-school.aimtech.am/api/v1/edit-school-contacts/",deleteSchoolContact:"https://edxchange-school.aimtech.am/api/v1/remove-school-contact/",getVendorInformationById:"https://edxchange-supplier.aimtech.am/api/v1/get-supplier/",editVendor:"https://edxchange-supplier.aimtech.am/api/v1/supplier/",addVendorAddress:"https://edxchange-supplier.aimtech.am/api/v1/add-supplier-address/",editVendorAddress:"https://edxchange-supplier.aimtech.am/api/v1/edit-supplier-address/",removeVendorAddress:"https://edxchange-supplier.aimtech.am/api/v1/remove-supplier-address/",getVendorContacts:"https://edxchange-supplier.aimtech.am/api/v1/get-supplier-contacts/",addVendorContact:"https://edxchange-supplier.aimtech.am/api/v1/add-supplier-contacts/",editVendorContact:"https://edxchange-supplier.aimtech.am/api/v1/edit-supplier-contacts/",deleteVendorContact:"https://edxchange-supplier.aimtech.am/api/v1/remove-supplier-contact/",filterVendor:"https://edxchange-supplier.aimtech.am/api/v1/filter-supplier?search=",getStates:"https://edxchange-school.aimtech.am/api/v1/get-states-list",getAllSuppliers:"https://edxchange-supplier.aimtech.am/api/v1/all-suppliers",getSuppliers:"https://edxchange-supplier.aimtech.am/api/v1/supplier",filterSupplier:"https://edxchange-supplier.aimtech.am/api/v1/filter-supplier?search=",getAllocationsBySchoolName:"",getAllocationBar:"https://edxchange-allocation.aimtech.am/api/v1/allocations-totals/",filterAllocation:"https://edxchange-allocation.aimtech.am/api/v1/filter-allocation/",getInventoryTotalCost:"https://inventory.aimtech.am/api/v1/get-inventory-total-cost/",getInventory:"https://inventory.aimtech.am/api/v1/inventory/",addInventory:"https://inventory.aimtech.am/api/v1/inventory",getAdditionalInfoForInventory:"https://inventory.aimtech.am/api/v1/get-supplier-category-status-data",modifyInventoryStatus:"https://inventory.aimtech.am/api/v1/modify-inventory/",filterInventory:"https://inventory.aimtech.am/api/v1/filter-inventory/",getLicense:"https://inventory.aimtech.am/api/v1/license",getTotalLicense:"https://inventory.aimtech.am/api/v1/license-total/",getActivity:"https://edxchange-activity.aimtech.am/api/v1/item/",getAttendeesById:"https://edxchange-activity.aimtech.am/api/v1/get-atendee/",getCategoryTypes:"https://edxchange-activity.aimtech.am/api/v1/get-types-categories/",getAllCategories:"https://edxchange-activity.aimtech.am/api/v1/get-all-categories",editActivity:"https://edxchange-activity.aimtech.am/api/v1/item/",addActivity:"https://edxchange-activity.aimtech.am/api/v1/item/",deleteActivity:"https://edxchange-activity.aimtech.am/api/v1/remove-item/",getApprovals:"https://edxchange-activity.aimtech.am/api/v1/get-approval",getActivityBar:"https://edxchange-activity.aimtech.am/api/v1/activity-totals/",getRcurranceTypes:"https://edxchange-activity.aimtech.am/api/v1/get-recurrance-types",getSchedules:"https://edxchange-activity.aimtech.am/api/v1/get-schedule/",addSchedule:"https://edxchange-activity.aimtech.am/api/v1/add-schedule/",editSchedule:"https://edxchange-activity.aimtech.am/api/v1/edit-schedule/",removeSchedule:"https://edxchange-activity.aimtech.am/api/v1/remove-schedule/",removeAttendee:"https://edxchange-activity.aimtech.am/api/v1/remove-attendy/",addAttendee:"https://edxchange-activity.aimtech.am/api/v1/add-attendy/",filterActivity:"https://edxchange-activity.aimtech.am/api/v1/filter-budget/",getSubcategories:"https://edxchange-activity.aimtech.am/api/v1/get-types-subcategories/",getAtendeeTypes:"https://edxchange-activity.aimtech.am/api/v1/get-atendee-types",getAttendyParticipant:"https://edxchange-activity.aimtech.am/api/v1/get-attendy-participiant/",deleteAttendyParticipant:"https://edxchange-activity.aimtech.am/api/v1/remove-attendy-parties/",addParticipant:"https://edxchange-activity.aimtech.am/api/v1/add-participant/",addNewParticipant:"https://edxchange-activity.aimtech.am/api/v1/add-participant-and-assign-to-activity/",searchParticipant:"https://edxchange-activity.aimtech.am/api/v1/search-attendy-participant/",getFunds:"https://edxchange-activity.aimtech.am/api/v1/get-fund-source/",getCampuses:"https://edxchange-school.aimtech.am/api/v1/get-school-campus-list/",getTrackingCategories:"https://edxchange-activity.aimtech.am/api/v1/get-item-category-tracking/",getInventoryCategories:"https://edxchange-activity.aimtech.am/api/v1/get-inventory-category-type",allocationFundId:"https://edxchange-activity.aimtech.am/api/v1/get-fund-source-id/",getBudgetBalance:"https://edxchange-activity.aimtech.am/api/v1/get-budget-balance/",getTeachersData:"https://edxchange-teacher.aimtech.am/api/v1/teacher",getTeachers:"https://edxchange-teacher.aimtech.am/api/v1/teacher?pagination=0",getTeacherBudget:"https://edxchange-activity.aimtech.am/api/v1/get-teacher-budget-list/",getTeacherTotalBar:"https://edxchange-activity.aimtech.am/api/v1/get-teacher-totals/",createTeacherAssignment:"https://edxchange-teacher.aimtech.am/api/v1/create-teacher-assignment/",addTeacherBudget:"https://edxchange-activity.aimtech.am/api/v1/add-teacher-budget/",editTeacherAssignment:"https://edxchange-activity.aimtech.am/api/v1/edit-teacher-assignment/",addTeacherAssignment:"https://edxchange-activity.aimtech.am/api/v1/add-teacher-assignment/",deleteTeacher:"https://edxchange-activity.aimtech.am/api/v1/remove-teacher-assignment/",getTeacherBudgetById:"https://edxchange-teacher.aimtech.am/api/v1/get-teacher-compensation/",getRoleTypes:"https://edxchange-teacher.aimtech.am/api/v1/get-teacher-role-type",getEmployementTypes:"https://edxchange-teacher.aimtech.am/api/v1/get-teacher-employement-type",fringeTypes:"https://edxchange-teacher.aimtech.am/api/v1/get-fring",paySchedule:"https://edxchange-teacher.aimtech.am/api/v1/count-shceduled-pay/",filterTeacher:"https://edxchange-teacher.aimtech.am/api/v1/filter-teacher-assignment/",getInvoices:"https://edxchange-invoice.aimtech.am/api/v1/item",getTerms:"https://edxchange-invoice.aimtech.am/api/v1/invoice-term",deleteInvoice:"https://edxchange-invoice.aimtech.am/api/v1/remove-invoice/",editInvoice:"https://edxchange-invoice.aimtech.am/api/v1/edit-invoice/",addInvoice:"https://edxchange-invoice.aimtech.am/api/v1/add-invoice/",getInvoiceTotals:"https://edxchange-statistic.aimtech.am/api/v1/get-invoice-totals",filterInvoice:"https://edxchange-invoice.aimtech.am/api/v1/filter-invoice",getReconciliation:"https://edxchange-invoice.aimtech.am/api/v1/reconciliation-item",deleteReconciliation:"https://edxchange-invoice.aimtech.am/api/v1/remove-reconciliation/",editReconciliation:"https://edxchange-invoice.aimtech.am/api/v1/edit-reconciliation/",addReconciliation:"https://edxchange-invoice.aimtech.am/api/v1/add-reconciliation/",filterReconciliation:"https://edxchange-invoice.aimtech.am/api/v1/filter-reconciliation",getReconciliationBudgetItems:"https://edxchange-invoice.aimtech.am/api/v1/get-reconciliation-budget-list/",addReconciliationBudgetItems:"https://edxchange-invoice.aimtech.am/api/v1/add-reconciliation-budget-items/",getBudgetItems:"https://edxchange-invoice.aimtech.am/api/v1/get-budget-list/",addSelected:"https://edxchange-invoice.aimtech.am/api/v1/add-budget-items/",getAllocations:"https://edxchange-allocation.aimtech.am/api/v1/get-allocation-type",getFundSourceByTitleId:"https://edxchange-activity.aimtech.am/api/v1/get-fund-source/",getInvoiceStatus:"https://edxchange-invoice.aimtech.am/api/v1/invoice-status",deleteBudget:"https://edxchange-invoice.aimtech.am/api/v1/remove-budget-item/"},o()(i,"getAllCategories","https://edxchange-activity.aimtech.am/api/v1/get-all-categories"),o()(i,"getAllSubcategories","https://edxchange-activity.aimtech.am/api/v1/get-all-subcategories"),o()(i,"getAllFunds","https://edxchange-activity.aimtech.am/api/v1/get-all-fundsources"),o()(i,"getDocumentTrays","https://edxchange-document.aimtech.am/api/v1/document-tray"),o()(i,"getTrackingStatus","https://edxchange-document.aimtech.am/api/v1/tracking-status/"),o()(i,"getDocumentsStatus","https://edxchange-document.aimtech.am/api/v1/document-status"),o()(i,"getTrackingStatusByCategory","https://edxchange-document.aimtech.am/api/v1/get-tracking-status/"),o()(i,"documentsByTray","https://edxchange-document.aimtech.am/api/v1/documents-by-tray/"),o()(i,"getDocumentCategory","https://edxchange-document.aimtech.am/api/v1/document-category"),o()(i,"addDocument","https://edxchange-document.aimtech.am/api/v1/add-document/"),o()(i,"addDocumentToExistingItem","https://edxchange-document.aimtech.am/api/v1/add-document-to-existing-item/"),o()(i,"deleteDocument","https://edxchange-document.aimtech.am/api/v1/remove-document/"),o()(i,"addTrackingStatus","https://edxchange-document.aimtech.am/api/v1/add-tracking-status/"),o()(i,"addTrackingNote","https://edxchange-document.aimtech.am/api/v1/add-note/"),o()(i,"getActivityTrackings","https://edxchange-document.aimtech.am/api/v1/activity-tracking"),o()(i,"getActivityTypes","https://edxchange-activity.aimtech.am/api/v1/online-status"),o()(i,"getActivityStatus","https://edxchange-activity.aimtech.am/api/v1/get-item-status/"),o()(i,"getStatuses","https://edxchange-activity.aimtech.am/api/v1/get-statuses?"),o()(i,"searchTag","https://edxchange-document.aimtech.am/api/v1/find-tag?name="),o()(i,"documentByTagId","https://edxchange-document.aimtech.am/api/v1/get-document-by-tag?tagIds="),o()(i,"getUnits","https://edxchange-activity.aimtech.am/api/v1/get-unity"),o()(i,"getItemizationLists","https://edxchange-activity.aimtech.am/api/v1/get-breakdown/"),o()(i,"getItemizationListsForInventory","https://edxchange-activity.aimtech.am/api/v1/get-breakdown-inventory/"),o()(i,"addItemizationItem","https://edxchange-activity.aimtech.am/api/v1/add-budget-breakdown/"),o()(i,"deleteItemizationItem","https://edxchange-activity.aimtech.am/api/v1/remove-budget-item/"),o()(i,"addItemToInventory","https://edxchange-activity.aimtech.am/api/v1/add-item-to-inventory/"),i);e["a"]=l},ae50:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{staticClass:"q-mb-md no-shadow border overflow-auto my-sticky-column-table",attrs:{data:t.dateOfActivity,columns:t.tableColumns,"row-key":"id","hide-bottom":"",pagination:t.paginationDate},on:{"update:pagination":function(e){t.paginationDate=e}},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{directives:[{name:"show",rawName:"v-show",value:0==e.rowIndex||0!=e.rowIndex&&t.expand,expression:"props.rowIndex == 0 || props.rowIndex != 0 && expand"}],staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(a){return t.openEditSchedulePopup(e.row)}}},[a("q-td",{attrs:{"auto-width":""}},[0==e.rowIndex?a("q-btn",{attrs:{size:"sm",flat:"",color:"black",icon:t.expand?"keyboard_arrow_down":"keyboard_arrow_right"},on:{click:function(e){e.stopPropagation(),t.expand=!t.expand}}}):t._e()],1),a("q-td",{key:"startdate",attrs:{props:e}},[a("span",{staticClass:"q-mr-md"},[t._v(t._s(e.row.startdate))]),a("span",[t._v(t._s(e.row.time1))])]),a("q-td",{key:"endDate",attrs:{props:e}},[a("span",{staticClass:"q-mr-md"},[t._v(t._s(e.row.endDate))]),a("span",[t._v(t._s(e.row.time2))])]),a("q-td",{key:"location",staticStyle:{"white-space":"initial",width:"230px","max-width":"230px"},attrs:{props:e}},[0!=e.rowIndex?a("span",[t._v(t._s(e.row.location))]):t._e()]),a("q-td",{key:"reccurance",attrs:{props:e}},[0!=e.rowIndex?a("div",[t._v("\n                    "+t._s(e.row.repeats.label)+"\n                    "+t._s(e.row.repeatEvery)+"\n                    "),t._l(e.row.repeatOn,(function(e){return a("span",{key:e.label},[e.checked?a("span",{staticClass:"q-mr-sm"},[t._v(t._s(e.label))]):t._e()])}))],2):t._e()]),a("q-td",{key:"note",attrs:{props:e}},[a("q-icon",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.row.note,placement:"top-center",classes:["info"],targetClasses:["it-has-a-tooltip"],offset:19},expression:"{\n                        content: props.row.note,\n                        placement: 'top-center',\n                        classes: ['info'],\n                        targetClasses: ['it-has-a-tooltip'],\n                        offset: 19,\n                    }"}],staticClass:"cursor-pointer",staticStyle:{"font-size":"2em"},attrs:{name:"sticky_note_2",color:"orange"}})],1),a("q-td",{key:"actions",attrs:{props:e}},[0!=e.rowIndex?a("q-btn",{attrs:{icon:"delete_forever",color:"red",size:"sm","no-caps":"",round:""},on:{click:function(a){return a.stopPropagation(),t.openDeleteDate(e.row)}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Delete")])])],1):t._e()],1)],1)]}}])})},s=[],o=a("2b0e"),n=a("e37d");o["default"].use(n["a"]);var l={name:"DateOfActivityPopup",data:function(){return{expand:!1,paginationDate:{rowsPerPage:1e3},tableColumns:[{name:"toggle",style:"width: 30px"},{name:"startdate",align:"left",label:"Start Date",field:"startdate"},{name:"endDate",align:"left",label:"End Date",field:"endDate"},{name:"location",align:"left",label:"Location",field:"location"},{name:"reccurance",align:"left",label:"Recurranse",field:"reccurance"},{name:"note",align:"left",label:"Note",field:"note"},{name:"actions",align:"left",label:"Actions",field:"actions"}]}},props:{dateOfActivity:{required:!0}},methods:{openEditSchedulePopup:function(t){this.$emit("openEditPopup",t)},openDeleteDate:function(t){this.$emit("openDeletePopup",t)}},created:function(){console.log("111111",this.dateOfActivity),console.log("222222",this.tableColumns)}},d=l,r=(a("ddf2"),a("2877")),c=Object(r["a"])(d,i,s,!1,null,"b46888f4",null);e["a"]=c.exports},af57:function(t,e,a){},c0ff:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-gutter-sm"},[a("q-card",[a("q-table",{staticClass:"no-shadow overflow-auto my-sticky-column-table",attrs:{data:t.data,columns:t.columns,loading:t.loading,"row-key":"id",pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(e){return[a("q-btn",{staticClass:"q-mr-md edx-add-btn",attrs:{square:"","text-color":"white",icon:"add","no-caps":""},on:{click:function(e){return t.openLicenseModal()}}},[t._v("Add")]),a("q-btn",{staticClass:"edx-excel-btn",attrs:{round:"",icon:"mdi-file-excel-box",size:"10px","text-color":"white","no-caps":""},on:{click:t.exportTable}}),"list"===t.mode?a("q-btn",{staticClass:"q-px-sm",attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}},[a("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:t.$q.platform.is.mobile}},[t._v(t._s(e.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen")+"\n                ")])],1):t._e(),a("div",{staticClass:"q-pa-sm q-gutter-sm"},[a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this item?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"red"},on:{click:t.deleteItem}})],1)],1)],1)],1)]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(a){return t.openEditLicensePopup(e.row)}}},[a("q-td",{key:"qty",attrs:{props:e}},[a("div",[t._v(t._s(e.row.quantity))])]),a("q-td",{key:"name",staticStyle:{"white-space":"initial",width:"350px","max-width":"350px"},attrs:{props:e}},[a("span",{staticClass:"inline-span"},[t._v(t._s(e.row.Item_name))])]),a("q-td",{key:"vendor",staticStyle:{"white-space":"initial",width:"350px","max-width":"350px"},attrs:{props:e}},[e.row.suplier_uni?a("span",{staticClass:"inline-span"},[t._v(t._s(e.row.suplier_uni.label))]):t._e()]),a("q-td",{key:"costPerLicense",attrs:{props:e}},[a("div",[t._v("$ "+t._s(e.row.item_cost))])]),a("q-td",{key:"totalCost",attrs:{props:e}},[a("div",[t._v("$ "+t._s(parseFloat(e.row.quantity*e.row.item_cost)))])]),a("q-td",{key:"purchaseDate",attrs:{props:e}},[a("div",[t._v(t._s(e.row.purchase_date))]),a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"edx-pagination",mask:"MM-DD-YYYY"},on:{input:function(a){return t.detectChange(e.rowIndex)}},model:{value:e.row.purchase_date,callback:function(a){t.$set(e.row,"purchase_date",a)},expression:"props.row.purchase_date"}},[a("div",{staticClass:"row items-center justify-end q-gutter-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancel",color:"primary",flat:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"OK",color:"primary",flat:""}})],1)])],1)],1),a("q-td",{key:"expirationDate",attrs:{props:e}},[a("div",[t._v(t._s(e.row.expiration_date))]),a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"edx-pagination",mask:"MM-DD-YYYY"},on:{input:function(a){return t.detectChange(e.rowIndex)}},model:{value:e.row.expiration_date,callback:function(a){t.$set(e.row,"expiration_date",a)},expression:"props.row.expiration_date"}},[a("div",{staticClass:"row items-center justify-end q-gutter-sm"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Cancel",color:"primary",flat:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"OK",color:"primary",flat:""}})],1)])],1)],1),a("q-td",{key:"actions",attrs:{props:e}},[a("q-fab",{attrs:{padding:"xs",color:"edx-action-btn",icon:t.qFab,"active-icon":t.qFavOpen,direction:"left"},on:{click:function(t){t.stopPropagation()}}},[a("q-fab-action",{staticClass:"q-mr-sm",attrs:{icon:t.duplicateIcon,color:"edx-duplicate-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDuplicatePopup(e.row)}}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip",anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Duplicate")])])],1),a("q-fab-action",{attrs:{icon:t.deleteIcon,color:"edx-delete-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDeleteModal(e.row)}}},[a("q-tooltip",{attrs:{"content-class":"edx-tooltip",anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Delete")])])],1)],1)],1)],1)]}},{key:"bottom",fn:function(){return[a("div",{staticClass:"q-pa-md flex flex-center"},[a("q-pagination",{attrs:{"max-pages":6,max:t.pages,"direction-links":!0,color:"edx-pagination"},on:{click:function(e){return t.changePagination(t.current)}},model:{value:t.current,callback:function(e){t.current=e},expression:"current"}}),a("div",{staticClass:"row justify-center items-center"},[a("span",{staticClass:"q-mr-md"},[t._v("Rows Per page")]),a("q-select",{attrs:{dense:"",outlined:"",options:t.rowsPerPageArr},on:{input:t.changeRowsPerPage},model:{value:t.pagination.rowsPerPage,callback:function(e){t.$set(t.pagination,"rowsPerPage",e)},expression:"pagination.rowsPerPage"}})],1)],1)]},proxy:!0}])})],1),a("LicensePopup",{attrs:{show:t.licensePopup,data:t.editedItem,isEdit:t.addNew,tab:t.tab},on:{togglePopup:t.togglePopup,updateTableList:t.updateTableList}})],1)},s=[],o=(a("f751"),a("7f7f"),a("c47a")),n=a.n(o),l=a("b178"),d=a("bc3a"),r=a.n(d),c=a("a1bc"),p=a("ec8cb"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dialog-draggable",{attrs:{width:800,modelDialog:t.showPopup,title:"Licence",icon:"dvr"}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 q-pr-sm"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"q-mb-md q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Qty")]),a("q-input",{attrs:{type:"number",dense:"",outlined:""},model:{value:t.editedData.quantity,callback:function(e){t.$set(t.editedData,"quantity",e)},expression:"editedData.quantity"}})],1)]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"q-mb-md q-pr-sm"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Cost per License")]),a("q-input",{attrs:{type:"number",prefix:"$",dense:"",outlined:""},model:{value:t.editedData.item_cost,callback:function(e){t.$set(t.editedData,"item_cost",e)},expression:"editedData.item_cost"}})],1)]),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Total cost")]),a("q-input",{attrs:{prefix:"$",dense:"",standout:"bg-teal text-white",disabled:"",readonly:"",value:isNaN(parseFloat(t.editedData.quantity*t.editedData.item_cost))?0:parseFloat(t.editedData.quantity*t.editedData.item_cost)}})],1)])]),a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Name")]),a("q-input",{attrs:{dense:"",outlined:""},model:{value:t.editedData.Item_name,callback:function(e){t.$set(t.editedData,"Item_name",e)},expression:"editedData.Item_name"}})],1)]),a("div",{staticClass:"col-md-6 q-pl-sm"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Supplier")]),a("q-select",{attrs:{dense:"",outlined:"","use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:t.optionsSupplier},on:{filter:t.filterSupplier},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n                                    No results\n                                    ")])],1)]},proxy:!0}]),model:{value:t.editedData.suplier_uni,callback:function(e){t.$set(t.editedData,"suplier_uni",e)},expression:"editedData.suplier_uni"}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6 q-pr-sm"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Date of Purchase")]),a("q-input",{staticClass:"q-mr-md",attrs:{outlined:"",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"edx-pagination",mask:"MM/DD/YYYY"},model:{value:t.editedData.purchase_date,callback:function(e){t.$set(t.editedData,"purchase_date",e)},expression:"editedData.purchase_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.editedData.purchase_date,callback:function(e){t.$set(t.editedData,"purchase_date",e)},expression:"editedData.purchase_date"}})],1)]),a("div",{staticClass:"col-md-6 q-pl-sm"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Expiration Date")]),a("q-input",{staticClass:"q-mr-md",attrs:{outlined:"",dense:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{color:"edx-pagination",mask:"MM/DD/YYYY"},model:{value:t.editedData.expiration_date,callback:function(e){t.$set(t.editedData,"expiration_date",e)},expression:"editedData.expiration_date"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Close",color:"primary",flat:""}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.editedData.expiration_date,callback:function(e){t.$set(t.editedData,"expiration_date",e)},expression:"editedData.expiration_date"}})],1)])])]),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"q-mb-md"},[a("div",{staticClass:"text-subtitle2 q-mb-sm"},[t._v("Note")]),a("q-input",{attrs:{dense:"",outlined:"",type:"textarea"},model:{value:t.editedData.note,callback:function(e){t.$set(t.editedData,"note",e)},expression:"editedData.note"}})],1)])])])]),a("q-card-actions",{staticClass:"row justify-end"},[a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.closePopup}}),t.isEdit?a("q-btn",{attrs:{loading:t.loading,flat:"",label:"Add",color:"primary"},on:{click:t.addLicense}}):a("q-btn",{attrs:{loading:t.loading,flat:"",label:"Save",color:"primary"},on:{click:t.addLicense}})],1)])],1)],1)},m=[],h=a("13af"),g={props:{show:{required:!0},isEdit:{required:!0},data:{required:!0},tab:{required:!0}},components:{dialogDraggable:h["a"]},data:function(){return{loading:!1,editedData:{},optionsSupplier:[],optionsSupplierForFilter:[]}},methods:{closePopup:function(){this.$emit("togglePopup",!1)},addLicense:function(){var t,e=this,a={school_id:this.$route.params.id,allocation_type_id:this.tab,quantity:this.editedData.quantity,item_name:this.editedData.Item_name,item_cost:this.editedData.item_cost,purchase_date:this.editedData.purchase_date,supplier_id:null===(t=this.editedData.suplier_uni)||void 0===t?void 0:t.id,note:this.editedData.note,expiration_date:this.editedData.expiration_date};if(this.isEdit){var i={method:"POST",url:c["a"].getLicense,headers:{Accept:"application/json"},data:a};r()(i).then((function(t){e.$q.notify({message:"License Added successfully!",type:"positive"}),e.$emit("updateTableList",!0),e.closePopup()}))}else{var s=this.editedData.id,o={method:"PUT",url:c["a"].getLicense+"/"+s,headers:{Accept:"application/json"},data:a};r()(o).then((function(t){e.$q.notify({message:"License updated successfully!",type:"positive"}),e.$emit("updateTableList",!0),e.closePopup()}))}},getAdditionalInfo:function(t){var e=this,a={method:"GET",url:c["a"].getAdditionalInfoForInventory+"/"+t,headers:{Accept:"application/json"}};r()(a).then((function(t){for(var a=[],i=0;i<t.data.suppliers.length;i++)if(i<30){var s={id:t.data.suppliers[i].id,label:t.data.suppliers[i].company_name,value:t.data.suppliers[i].id};a.push(s)}e.optionsSupplier=a,e.optionsSupplierForFilter=a}))},filterSupplier:function(t,e,a){var i=this;e((function(){if(t){var e=t.toLowerCase();i.optionsSupplier=i.optionsSupplierForFilter.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))}},computed:{showPopup:function(){return this.show}},watch:{show:function(t){this.$emit("togglePopup",t),t&&(this.getAdditionalInfo(this.tab),this.isEdit?this.editedData={quantity:"",item_cost:"",Item_name:"",Supplier:{id:null,label:null},purchase_date:"",expiration_date:"",note:""}:this.editedData=this.data)}}},v=g,f=a("2877"),y=Object(f["a"])(v,u,m,!1,null,null,null),b=y.exports,q={},w={name:"License",props:{type:{required:!0}},components:{LicensePopup:b},data:function(){var t;return t={licensePopup:!1,schoolName:"",mode:"list",tab:"1",pages:1,pagination:{rowsPerPage:10},current:1,count:10,data:[{quantity:111,foundedBy:"foundedBy",name:"name",vendor:"Vendor",costPerLicense:"costPerLicense",totalCost:"totalCost",purchaseDate:"purchaseDate",expirationDate:"expirationDate",changed:!1,showEditButton:!0}],tempDataX:[],columns:[{name:"qty",align:"left",label:"Qty",field:"qty",sortable:!0},{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"vendor",align:"left",label:"Vendor",field:"vendor",sortable:!0},{name:"costPerLicense",align:"left",label:"Cost Per License",field:"costPerLicense",sortable:!0},{name:"totalCost",align:"left",label:"Total Cost",field:"totalCost",sortable:!0},{name:"purchaseDate",align:"left",label:"Date Of Purchase",field:"purchaseDate",sortable:!0},{name:"expirationDate",align:"left",label:"Expiration Date",field:"expirationDate",sortable:!0},{name:"actions",align:"left",label:"Actions",field:"actions",sortable:!0}],editedItem:{},loading:!1,confirm:!1,typeModel:"",optionsSchool:[],optionsSchoolForFilter:[],optionsAllocation:[{id:1,label:"Title I"},{id:2,label:"Title II"},{id:3,label:"Title III"},{id:4,label:"Title IV"},{id:5,label:"ESSER"},{id:6,label:"GEEP"}],allocationSelected:"1"==this.tab&&{id:1,label:"Title I"},optionsCategory:[],optionsCategoryForFilter:[],optionsSupplier:[],optionsSupplierForFilter:[],optionsIdentifier:[],optionsCondition:[],optionsStatus:[]},n()(t,"typeModel",null),n()(t,"addNew",!1),n()(t,"rowsPerPageArr",["5","10","25","50","75","100"]),n()(t,"onpremise",!1),n()(t,"offpremise",!1),n()(t,"disposed",!1),n()(t,"lost",!1),n()(t,"stolen",!1),n()(t,"transfered",!1),n()(t,"stored",!1),n()(t,"date","2020-06-06"),n()(t,"statusChangeObject",{}),n()(t,"statusChanged",!1),t},methods:{togglePopup:function(t){this.licensePopup=t},updateTableList:function(){this.getLicense(this.$route.params.id,this.count,this.current)},exportTable:function(){var t=this,e=[this.columns.map((function(t){return wrapCsvValue(t.label)}))].concat(this.data.map((function(e){return t.columns.map((function(t){return wrapCsvValue("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format)})).join(",")}))).join("\r\n"),a=Object(l["d"])("table-export.csv",e,"text/csv");!0!==a&&this.$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})},getLicense:function(t,e,a){var i=this;this.loading=!0;var s={method:"GET",url:c["a"].getLicense+"/"+t+"/"+this.tab+"?limit="+e+"&page="+a,headers:{Accept:"application/json"}};r()(s).then((function(t){console.log("license",t.data);var e=t.data.license;i.pages=t.data.pagesCount;var a=i.parsingLicense(e);i.data=a,i.tempDataX=a,i.loading=!1}))},parsingLicense:function(t){for(var e=0;e<t.length;e++){switch(t[e].changed=!1,t[e].showEditButton=!0,console.log(parseInt(t[e].allocation_type_id)),t[e].allocation_type_id){case"1":t[e].allocation_type_id_uni={id:1,label:"Title I"};break;case"2":t[e].allocation_type_id_uni={id:2,label:"Title II"};break;case"3":t[e].allocation_type_id_uni={id:3,label:"Title III"};break;case"4":t[e].allocation_type_id_uni={id:4,label:"Title IV"};break;case"5":t[e].allocation_type_id_uni={id:5,label:"ESSER"};break;case"6":t[e].allocation_type_id_uni={id:6,label:"GEEP"};break}null!=t[e].supplier?t[e].suplier_uni={id:t[e].supplier_id,label:t[e].supplierName}:t[e].suplier_uni={id:999,label:"N/A"}}return t},getToday:function(){var t=new Date,e=t.getUTCMonth()+1,a=t.getUTCDate(),i=t.getUTCFullYear();return i+"-"+e+"-"+a},openEditLicensePopup:function(t){console.log(t,"asdasdasdasdasd gridsdfsdfsdfsd"),this.addNew=!1,this.editedItem=t,this.licensePopup=!0},openDuplicatePopup:function(t){this.addNew=!0,this.editedItem=t,this.licensePopup=!0},openLicenseModal:function(t){this.addNew=!0,this.editedItem=t,this.licensePopup=!0},changePagination:function(t){console.log("change pagination"),this.current=t,this.getLicense(this.$route.params.id,this.count,t)},changeRowsPerPage:function(){console.log("changeRowsPerPage"),this.count=this.pagination.rowsPerPage,this.current=1,this.getLicense(this.$route.params.id,this.count,this.current)},filterSupplier:function(t,e,a){var i=this;e((function(){if(t){var e=t.toLowerCase();i.optionsSupplier=i.optionsSupplierForFilter.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},getAdditionalInfo:function(t){var e=this,a={method:"GET",url:c["a"].getAdditionalInfoForInventory+"/"+t,headers:{Accept:"application/json"}};r()(a).then((function(t){for(var a=[],i=0;i<t.data.suppliers.length;i++)if(i<30){var s={id:t.data.suppliers[i].id,label:t.data.suppliers[i].company_name,value:t.data.suppliers[i].id};a.push(s)}e.optionsSupplier=a,e.optionsSupplierForFilter=a}))},copyRowData:function(t){q=JSON.stringify(this.tempDataX[t])},detectChange:function(t){this.editedItem=this.tempDataX[t],console.log("detectChange function",this.editedItem);var e=JSON.parse(q),a=JSON.stringify(this.data[t]);a=JSON.parse(a);var i=_.isEqual(e,a);this.data[t].changed=!i},cancellChange:function(t){if(this.addNew)this.data.splice(0,1),this.addNew=!1;else{var e=JSON.parse(q);Object.assign(this.data[t],e),this.data[t].changed=!1}},openDeleteModal:function(t){this.item=t,this.confirm=!0},deleteItem:function(){var t=this,e=this.item,a={method:"DELETE",url:c["a"].getLicense+"/"+e.id,headers:{Accept:"application/json"}};r()(a).then((function(a){console.log("DELETE RES :",a);var i=t.data.indexOf(e);t.data.splice(i,1),t.$q.notify({message:a.data,type:"positive"})}))},getLicenseBar:function(t){var e=this,a={method:"GET",url:c["a"].getTotalLicense+t,headers:{Accept:"application/json"}};r()(a).then((function(t){e.barInfo=t.data,console.log("Bar info",e.barInfo)}))}},watch:{},created:function(){this.tab=parseInt(this.type),this.getLicense(this.$route.params.id,this.count,this.current),this.getAdditionalInfo(this.tab)},computed:{qFab:function(){return p["a"].qFab},qFavOpen:function(){return p["a"].qFabOpen},duplicateIcon:function(){return p["a"].duplicate},deleteIcon:function(){return p["a"].delete}}},x=w,I=Object(f["a"])(x,i,s,!1,null,null,null);e["a"]=I.exports},c420:function(t,e,a){},d607:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyBpZD0iNDU3YmYyNzMtMjRhMy00ZmQ4LWE4NTctZTliOTE4MjY3ZDZhIiBkYXRhLW5hbWU9IkxheWVyIDEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSI2OTgiIGhlaWdodD0iNjk4IiB2aWV3Qm94PSIwIDAgNjk4IDY5OCI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJiMjQ3OTQ2Yy1jNjJmLTRkMDgtOTk0YS00YzNkNjRlMWU5OGYiIHgxPSIzNDkiIHkxPSI2OTgiIHgyPSIzNDkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9ImdyYXkiIHN0b3Atb3BhY2l0eT0iMC4yNSIvPjxzdG9wIG9mZnNldD0iMC41NCIgc3RvcC1jb2xvcj0iZ3JheSIgc3RvcC1vcGFjaXR5PSIwLjEyIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSJncmF5IiBzdG9wLW9wYWNpdHk9IjAuMSIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjx0aXRsZT5wcm9maWxlIHBpYzwvdGl0bGU+PGcgb3BhY2l0eT0iMC41Ij48Y2lyY2xlIGN4PSIzNDkiIGN5PSIzNDkiIHI9IjM0OSIgZmlsbD0idXJsKCNiMjQ3OTQ2Yy1jNjJmLTRkMDgtOTk0YS00YzNkNjRlMWU5OGYpIi8+PC9nPjxjaXJjbGUgY3g9IjM0OS42OCIgY3k9IjM0Ni43NyIgcj0iMzQxLjY0IiBmaWxsPSIjZjVmNWY1Ii8+PHBhdGggZD0iTTYwMSw3OTAuNzZhMzQwLDM0MCwwLDAsMCwxODcuNzktNTYuMmMtMTIuNTktNjguOC02MC41LTcyLjcyLTYwLjUtNzIuNzJINDY0LjA5cy00NS4yMSwzLjcxLTU5LjMzLDY3QTM0MC4wNywzNDAuMDcsMCwwLDAsNjAxLDc5MC43NloiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTEgLTEwMSkiIGZpbGw9IiM1MzZkZmUiLz48Y2lyY2xlIGN4PSIzNDYuMzciIGN5PSIzMzkuNTciIHI9IjE2NC45IiBmaWxsPSIjMzMzIi8+PHBhdGggZD0iTTI5My4xNSw0NzYuOTJIMzk4LjgxYTAsMCwwLDAsMSwwLDB2ODQuNTNBNTIuODMsNTIuODMsMCwwLDEsMzQ2LDYxNC4yOGgwYTUyLjgzLDUyLjgzLDAsMCwxLTUyLjgzLTUyLjgzVjQ3Ni45MmEwLDAsMCwwLDEsMCwwWiIgb3BhY2l0eT0iMC4xIi8+PHBhdGggZD0iTTI5Ni41LDQ3M2g5OWEzLjM1LDMuMzUsMCwwLDEsMy4zNSwzLjM1djgxLjE4QTUyLjgzLDUyLjgzLDAsMCwxLDM0Niw2MTAuMzdoMGE1Mi44Myw1Mi44MywwLDAsMS01Mi44My01Mi44M1Y0NzYuMzVBMy4zNSwzLjM1LDAsMCwxLDI5Ni41LDQ3M1oiIGZpbGw9IiNmZGI3OTciLz48cGF0aCBkPSJNNTQ0LjM0LDYxNy44MmExNTIuMDcsMTUyLjA3LDAsMCwwLDEwNS42Ni4yOXYtMTNINTQ0LjM0WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1MSAtMTAxKSIgb3BhY2l0eT0iMC4xIi8+PGNpcmNsZSBjeD0iMzQ2LjM3IiBjeT0iMzcyLjQ0IiByPSIxNTEuNDUiIGZpbGw9IiNmZGI3OTciLz48cGF0aCBkPSJNNDg5LjQ5LDMzNS42OFM1NTMuMzIsNDY1LjI0LDczMy4zNywzOTBsLTQxLjkyLTY1LjczLTc0LjMxLTI2LjY3WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI1MSAtMTAxKSIgb3BhY2l0eT0iMC4xIi8+PHBhdGggZD0iTTQ4OS40OSwzMzMuNzhzNjMuODMsMTI5LjU2LDI0My44OCw1NC4zbC00MS45Mi02NS43My03NC4zMS0yNi42N1oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTEgLTEwMSkiIGZpbGw9IiMzMzMiLz48cGF0aCBkPSJNNDg4LjkzLDMyNWE4Ny40OSw4Ny40OSwwLDAsMSwyMS42OS0zNS4yN2MyOS43OS0yOS40NSw3OC42My0zNS42NiwxMDMuNjgtNjkuMjQsNiw5LjMyLDEuMzYsMjMuNjUtOSwyNy42NSwyNC0uMTYsNTEuODEtMi4yNiw2NS4zOC0yMmE0NC44OSw0NC44OSwwLDAsMS03LjU3LDQ3LjRjMjEuMjcsMSw0NCwxNS40LDQ1LjM0LDM2LjY1LjkyLDE0LjE2LTgsMjcuNTYtMTkuNTksMzUuNjhzLTI1LjcxLDExLjg1LTM5LjU2LDE0LjlDNjA4Ljg2LDM2OS43LDQ2Mi41NCw0MDcuMDcsNDg4LjkzLDMyNVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yNTEgLTEwMSkiIGZpbGw9IiMzMzMiLz48ZWxsaXBzZSBjeD0iMTk0Ljg2IiBjeT0iMzcyLjMiIHJ4PSIxNC4wOSIgcnk9IjI2LjQyIiBmaWxsPSIjZmRiNzk3Ii8+PGVsbGlwc2UgY3g9IjQ5Ny44IiBjeT0iMzcyLjMiIHJ4PSIxNC4wOSIgcnk9IjI2LjQyIiBmaWxsPSIjZmRiNzk3Ii8+PC9zdmc+"},ddf2:function(t,e,a){"use strict";var i=a("5f54"),s=a.n(i);s.a},e1fa:function(t,e,a){"use strict";var i=a("7878"),s=a.n(i);s.a},e577:function(t,e,a){"use strict";var i=a("af57"),s=a.n(i);s.a},ec8cb:function(t,e,a){"use strict";var i={canceled:"cancel_schedule_send",budgeted:"monetization_on",gatheringDocuments:"file_present",eeadyForBilling:"payment",noAnswer:"do_disturb_on",onSite:"apartment",offCampus:"emoji_transportation",virtual:"laptop_chromebook",approved:"approval",declined:"thumb_down_alt",pending:"av_timer",needsAssessment:"psychology",catalog:"category",blanketApproval:"touch_app",preApproval:"how_to_reg",attendeeSummary:"people_alt",multi:"autorenew",repeat:"all_inclusive",qFab:"toc",qFabOpen:"menu_open",duplicate:"content_copy",delete:"delete_forever",edit:"edit",created:"drive_file_rename_outline",billed:"price_checkr",paid:"paid"};e["a"]=i},f97d:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("dialog-draggable",{attrs:{width:900,modelDialog:t.showPopup,title:"Itemization List",icon:"money"}},[a("q-card-section",{staticClass:"scroll q-pt-none q-pb-none q-pr-none q-pl-none",staticStyle:{"max-height":"60vh"}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"}),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"text-right"},[a("b",[t._v("Total: $ "),a("span",[t._v(t._s(t.total))])])]),a("div",{staticClass:"text-right"},[a("b",[t._v("Total w/Markup: $ "),a("span",[t._v(t._s(t.totalMarkup))])])])]),a("div",{staticClass:"col-md-12 q-mt-md"},[a("q-table",{staticClass:"overflow-auto",attrs:{data:t.data,columns:t.columns,"hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e}},[a("q-td",{key:"materialName",attrs:{props:e}},[a("div",[t._v(t._s(e.row.materialName))]),a("q-popup-edit",{attrs:{title:"Material Name",buttons:""},model:{value:e.row.materialName,callback:function(a){t.$set(e.row,"materialName",a)},expression:"props.row.materialName"}},[a("q-input",{attrs:{dense:"",outlined:""},model:{value:e.row.materialName,callback:function(a){t.$set(e.row,"materialName",a)},expression:"props.row.materialName"}})],1)],1),a("q-td",{key:"description",attrs:{props:e}},[a("div",[t._v(t._s(e.row.description))]),a("q-popup-edit",{attrs:{title:"Description",buttons:""},model:{value:e.row.materialName,callback:function(a){t.$set(e.row,"materialName",a)},expression:"props.row.materialName"}},[a("q-input",{attrs:{type:"textarea",dense:"",outlined:""},model:{value:e.row.description,callback:function(a){t.$set(e.row,"description",a)},expression:"props.row.description"}})],1)],1),a("q-td",{key:"inventoryCategory",attrs:{props:e}},[a("div",[t._v(t._s(e.row.inventoryCategory.label))]),a("q-popup-edit",{attrs:{title:"Inventory Category",buttons:""},model:{value:e.row.inventoryCategory,callback:function(a){t.$set(e.row,"inventoryCategory",a)},expression:"props.row.inventoryCategory"}},[a("q-select",{attrs:{dense:"",outlined:"",options:t.inventoryCategories},model:{value:e.row.inventoryCategory,callback:function(a){t.$set(e.row,"inventoryCategory",a)},expression:"props.row.inventoryCategory"}})],1)],1),a("q-td",{key:"qty",attrs:{props:e}},[a("div",{staticClass:"row"},[a("div",[t._v(t._s(e.row.qty?e.row.qty:0))]),e.row.qtyOptions?a("div",{staticClass:"q-ml-sm"},[t._v(" "+t._s(e.row.qtyOptions.label)+" ")]):t._e()]),e.row.qtyOptions?a("q-popup-edit",{attrs:{title:"Update Quantity",buttons:""},model:{value:e.row.qty,callback:function(a){t.$set(e.row,"qty",a)},expression:"props.row.qty"}},[a("q-select",{staticClass:"q-mb-sm",attrs:{options:t.options,dense:"",outlined:""},model:{value:e.row.qtyOptions,callback:function(a){t.$set(e.row,"qtyOptions",a)},expression:"props.row.qtyOptions"}}),3!=e.row.qtyOptions.id?a("q-input",{staticClass:"q-mb-sm",attrs:{type:"number",dense:"",autofocus:"",outlined:""},model:{value:e.row.qty,callback:function(a){t.$set(e.row,"qty",a)},expression:"props.row.qty"}}):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("q-input",{staticClass:"q-mb-sm q-pr-sm",attrs:{prefix:"$",type:"number",dense:"",autofocus:"",outlined:""},model:{value:e.row.amount,callback:function(a){t.$set(e.row,"amount",a)},expression:"props.row.amount"}})],1),a("div",{staticClass:"col-md-4"},[a("q-input",{staticClass:"q-mb-sm",attrs:{prefix:"%",type:"number",dense:"",autofocus:"",outlined:""},model:{value:e.row.percentage,callback:function(a){t.$set(e.row,"percentage",a)},expression:"props.row.percentage"}})],1)])],1):t._e()],1),a("q-td",{key:"amount",attrs:{props:e}},[t._v("\n                                        $ "+t._s(e.row.amount)+"\n                                        "),e.row.qtyOptions?a("q-popup-edit",{attrs:{title:"Update Quantity",buttons:""},model:{value:e.row.qty,callback:function(a){t.$set(e.row,"qty",a)},expression:"props.row.qty"}},[a("q-select",{staticClass:"q-mb-sm",attrs:{options:t.options,dense:"",outlined:""},model:{value:e.row.qtyOptions,callback:function(a){t.$set(e.row,"qtyOptions",a)},expression:"props.row.qtyOptions"}}),3!=e.row.qtyOptions.id?a("q-input",{staticClass:"q-mb-sm",attrs:{type:"number",dense:"",autofocus:"",outlined:""},model:{value:e.row.qty,callback:function(a){t.$set(e.row,"qty",a)},expression:"props.row.qty"}}):t._e(),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("q-input",{staticClass:"q-mb-sm q-pr-sm",attrs:{prefix:"$",type:"number",dense:"",autofocus:"",outlined:""},model:{value:e.row.amount,callback:function(a){t.$set(e.row,"amount",a)},expression:"props.row.amount"}})],1),a("div",{staticClass:"col-md-4"},[a("q-input",{staticClass:"q-mb-sm",attrs:{prefix:"%",type:"number",dense:"",autofocus:"",outlined:""},model:{value:e.row.percentage,callback:function(a){t.$set(e.row,"percentage",a)},expression:"props.row.percentage"}})],1)])],1):t._e()],1),a("q-td",{key:"total",attrs:{props:e}},[t._v("\n                                        $ "+t._s(parseFloat(e.row.amount)*parseFloat(e.row.qty))+"\n                                    ")]),a("q-td",{key:"wMarkup",attrs:{props:e}},[t._v("\n                                        $ "+t._s(parseFloat(e.row.amount)*parseFloat(e.row.qty)+parseFloat(e.row.amount)*parseFloat(e.row.qty)/parseFloat(e.row.percentage))+"\n                                    ")]),a("q-td",{key:"action",attrs:{props:e}},[a("q-fab",{attrs:{padding:"xs",color:"edx-action-btn",icon:"toc","active-icon":"menu_open",direction:"left"},on:{click:function(t){t.stopPropagation()}}},[a("q-fab-action",{staticClass:"q-mr-sm",attrs:{icon:"content_copy",color:"edx-duplicate-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDuplicatePopup(e.row)}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Duplicate")])])],1),a("q-fab-action",{attrs:{icon:"delete_forever",color:"edx-delete-btn",size:"sm","no-caps":"",round:""},on:{click:function(a){return t.openDeleteModal(e.row)}}},[a("q-tooltip",{attrs:{anchor:"top middle",self:"bottom middle",offset:[10,10],"transition-show":"flip-right","transition-hide":"flip-left"}},[a("strong",[t._v("Delete")])])],1)],1)],1)],1)]}}])})],1)])])]),a("q-card-actions",{staticClass:"row justify-between"},[a("div",{staticClass:"q-ml-sm q-mb-sm"},[a("q-btn",{attrs:{icon:"add",color:"blue",size:"md",round:""},on:{click:t.addItem}}),a("span",{staticClass:"q-ml-md"},[t._v("Add Item")])],1),a("div",[a("q-btn",{attrs:{flat:"",label:"Cancel",color:"primary"},on:{click:t.closePopup}}),a("q-btn",{attrs:{flat:"",label:"Save",color:"primary"},on:{click:t.addItemization}})],1)])],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure to delete this item?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"edx-delete-btn"},on:{click:t.deleteItem}})],1)],1)],1)],1)},s=[],o=(a("7f7f"),a("13af")),n=a("bc3a"),l=a.n(n),d=a("a1bc"),r={props:{show:{required:!0},inventoryCategories:{required:!0},id:{required:!0}},components:{dialogDraggable:o["a"]},data:function(){return{loading:!1,options:[],data:[],columns:[{name:"materialName",align:"left",label:"Material Name",field:"materialName",sortable:!0},{name:"description",align:"left",label:"Description",field:"description",sortable:!0},{name:"inventoryCategory",align:"left",label:"Inventory Category",field:"inventoryCategory",sortable:!0},{name:"qty",align:"left",label:"Qty",field:"qty",sortable:!0,style:"max-width: 90px; width: 90px"},{name:"amount",align:"left",label:"Amount",field:"amount",sortable:!0},{name:"total",align:"left",label:"Total",field:"total",sortable:!0},{name:"wMarkup",align:"left",label:"w/Markup",field:"wMarkup",sortable:!0},{name:"action",align:"left",label:"Action",field:"action",sortable:!0}],confirm:!1,deletedId:null}},methods:{closePopup:function(){this.$emit("togglePopup",!1)},getUnits:function(){var t=this,e={method:"GET",url:"".concat(d["a"].getUnits),headers:{Accept:"application/json"}};l()(e).then((function(e){console.log("get units",e.data);for(var a=e.data.unity,i=[],s=0;s<a.length;s++)i.push({id:a[s].id,label:a[s].abbreviation});t.options=i}))},addItem:function(){var t={materialName:"",description:"",inventoryCategory:{id:null,label:""},qty:0,qtyOptions:{id:1,label:"Qty"},amount:0,percentage:0};console.log(t),this.data.push(t)},getItemizationLists:function(){var t=this,e={method:"GET",url:"".concat(d["a"].getItemizationLists).concat(this.id),headers:{Accept:"application/json"}};l()(e).then((function(e){console.log("itemization data = ",e.data);for(var a=[],i=e.data.breakdown,s=0;s<i.length;s++){var o,n,l,d;a.push({id:i[s].id,materialName:i[s].name,description:i[s].description,inventoryCategory:{id:null===(o=i[s].inventory_category)||void 0===o?void 0:o.id,label:null===(n=i[s].inventory_category)||void 0===n?void 0:n.name},amount:i[s].unit_cost,qty:i[s].quantity,qtyOptions:{id:null===(l=i[s].unit)||void 0===l?void 0:l.id,label:null===(d=i[s].unit)||void 0===d?void 0:d.abbreviation},percentage:i[s].markup_percentage})}t.data=a}))},addItemization:function(){var t=this;console.log("data",this.data);for(var e=[],a=0;a<this.data.length;a++){var i,s;e.push({name:this.data[a].materialName,description:this.data[a].description,inventory_category_id:null===(i=this.data[a].inventoryCategory)||void 0===i?void 0:i.id,quantity:this.data[a].qty,unit_cost:this.data[a].amount,unit_id:null===(s=this.data[a].qtyOptions)||void 0===s?void 0:s.id,markup_percentage:this.data[a].percentage})}var o={method:"POST",url:d["a"].addItemizationItem+this.id,headers:{Accept:"application/json"},data:{breakdown:e}};l()(o).then((function(e){console.log("added",e.data),t.closePopup()}))},openDeleteModal:function(t){this.confirm=!0,this.deletedId=t.id},deleteItem:function(){var t=this,e={method:"DELETE",url:d["a"].deleteItemizationItem+this.deletedId,headers:{Accept:"application/json"}};l()(e).then((function(e){t.$q.notify({message:"Deleted!",type:"positive"}),t.getItemizationLists()}))},openDuplicatePopup:function(t){delete t.id;var e=JSON.stringify(t);e=JSON.parse(e),this.data.push(e)}},computed:{showPopup:function(){return this.show},total:function(){for(var t=0,e=0;e<this.data.length;e++)""==t&&(t=0),t+=parseFloat(this.data[e].amount)*parseFloat(this.data[e].qty);return t},totalMarkup:function(){for(var t=0,e=0;e<this.data.length;e++){var a=parseFloat(this.data[e].amount)*parseFloat(this.data[e].qty)+parseFloat(this.data[e].amount)*parseFloat(this.data[e].qty)/parseFloat(this.data[e].percentage);isNaN(a)&&(a=0),t+=a}return t}},watch:{show:function(t){this.$emit("togglePopup",t),t&&(this.getItemizationLists(),this.getUnits())}}},c=r,p=a("2877"),u=Object(p["a"])(c,i,s,!1,null,null,null);e["a"]=u.exports}}]);