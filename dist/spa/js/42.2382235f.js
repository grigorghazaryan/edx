(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{a277:function(e,t,a){"use strict";a.r(t);var n,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-sm edx-background"},[a("div",{staticClass:"q-pa-sm q-mt-sm q-gutter-sm"},[e._m(0),a("q-table",{attrs:{data:e.data,columns:e.columns,"row-key":"id",loading:e.loading,"binary-state-sort":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(t){return[a("q-input",{staticClass:"q-mr-md",staticStyle:{"min-width":"250px","max-width":"250px"},attrs:{outlines:"",dense:"",placeholder:"Search"},on:{keyup:e.keyUpFilter,keydown:e.keyDownFilter},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}],null,!0),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),a("q-btn",{staticClass:"q-mr-md edx-add-btn",attrs:{square:"","text-color":"white",icon:"add","no-caps":""},on:{click:e.showPopup}},[e._v("\n            Add\n          ")]),"list"===e.mode?a("q-btn",{staticClass:"q-px-sm",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}},[a("q-tooltip",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{disable:e.$q.platform.is.mobile}},[e._v(e._s(t.inFullscreen?"Exit Fullscreen":"Toggle Fullscreen")+"\n            ")])],1):e._e()]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"name",staticClass:"cursor-pointer",attrs:{props:t},on:{click:function(a){return e.changeRoute(t.row.id,t.row.name)}}},[a("div",{staticClass:"row justify-between items-center"},[e._v("\n                "+e._s(t.row.name)+" \n                ")])])],1)]}},{key:"bottom",fn:function(){return[a("div",{staticClass:"q-pa-md flex flex-center"},[a("q-pagination",{attrs:{"max-pages":6,max:e.pages,"direction-links":!0,color:"edx-pagination"},on:{click:function(t){return e.changePagination(e.current)}},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}}),a("div",{staticClass:"row justify-center items-center"},[a("span",{staticClass:"q-mr-md"},[e._v("Rows Per page")]),a("q-select",{attrs:{dense:"",outlined:"",options:e.rowsPerPageArr},on:{input:e.changeRowsPerPage},model:{value:e.pagination.rowsPerPage,callback:function(t){e.$set(e.pagination,"rowsPerPage",t)},expression:"pagination.rowsPerPage"}})],1)],1)]},proxy:!0}])}),a("dialog-draggable",{attrs:{width:500,modelDialog:e.isShowPopup,title:"Add New Vendor"},on:{onHide:function(t){e.isShowPopup=!1}}},[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row q-mb-sm"},[a("div",{staticClass:"col-md-12 q-mb-sm"},[a("q-input",{attrs:{outlined:"",label:"Company Name"},model:{value:e.vendor.company_name,callback:function(t){e.$set(e.vendor,"company_name",t)},expression:"vendor.company_name"}})],1)])]),a("q-separator"),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Add",color:"primary"},on:{click:e.addSupplier}})],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:e.isShowDeletePopup,callback:function(t){e.isShowDeletePopup=t},expression:"isShowDeletePopup"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[e._v("Are you sure to delete this Vendor?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"No, thanks",color:"primary"}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"Yes",color:"red"},on:{click:e.deleteVendor}})],1)],1)],1)],1)])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"edx-header-parent"},[a("span",{staticClass:"edx-header-text"},[e._v("Vendors")])])}],s=(a("7f7f"),a("bc3a")),r=a.n(s),l=a("a1bc"),c=a("13af"),p=500,u={components:{dialogDraggable:c["a"]},data:function(){return{vendor:{company_name:""},selectedVendor:{},loading:!0,pagination:{rowsPerPage:10},current:1,count:10,columns:[{name:"name",align:"left",label:"Name",field:"date",sortable:!0}],data:[],rowsPerPageArr:["5","10","25","50","75","100"],mode:"list",isShowPopup:!1,isShowDeletePopup:!1,filter:""}},methods:{supplierParsing:function(e){for(var t=[],a=0;a<e.length;a++){var n={id:e[a].id,name:e[a].company_name};t.push(n)}return t},getSuppliers:function(e,t){var a=this,n={method:"GET",url:l["a"].getSuppliers+"?limit="+e+"&page="+t,headers:{Accept:"application/json"}};r()(n).then((function(e){a.pages=e.data.pagesCount;var t=e.data.supplier,n=a.supplierParsing(t);a.data=n,a.loading=!1}))},changeRoute:function(e,t){this.$router.push({path:"/Vendors/"+e,query:{name:t}})},changePagination:function(e){this.current=e,this.getSuppliers(this.count,this.current)},changeRowsPerPage:function(){this.count=this.pagination.rowsPerPage,this.current=1,this.getSuppliers(this.count,this.current)},showPopup:function(){this.isShowPopup=!0},filterVendors:function(){var e=this;this.loading=!0,console.log("send request");var t={method:"GET",url:l["a"].filterSupplier+this.filter,headers:{Accept:"application/json"}};r()(t).then((function(t){e.pages=t.data.pagesCount;var a=t.data.supplier,n=e.supplierParsing(a);e.data=n,e.loading=!1})).catch((function(t){e.loading=!1}))},addSupplier:function(){var e=this,t={company_name:this.vendor.company_name,token:localStorage.getItem("access-token")},a={method:"POST",url:l["a"].getSuppliers,headers:{Accept:"application/json"},data:t};r()(a).then((function(t){var a={id:t.data.supplier[0].id,name:t.data.supplier[0].short_name};e.data.unshift(a),e.$q.notify({message:"Vendor added!",type:"positive"}),e.isShowPopup=!1;var n=t.data.supplier[0].company_name;e.$router.push({path:"/Vendors/"+t.data.supplier[0].id,query:{name:n}})}))},deleteVendor:function(){var e=this,t={method:"DELETE",url:l["a"].getSuppliers+"/"+this.selectedVendor.id,headers:{Accept:"application/json"}};r()(t).then((function(t){var a=e.data.indexOf(e.selectedVendor);e.data.splice(a,1),e.$q.notify({message:t.data,type:"positive"})}))},keyUpFilter:function(){clearTimeout(n),n=setTimeout(this.doneTyping,p)},keyDownFilter:function(){clearTimeout(n)},doneTyping:function(){(this.filter.length>1||0==this.filter.length)&&this.filterVendors()}},created:function(){this.getSuppliers(this.count,this.current)},computed:{routeTab:function(){if(this.$route.query.name)return"".concat(this.$route.query.name);var e=this.$route.path.substring(1);return e}}},d=u,m=a("2877"),h=Object(m["a"])(d,i,o,!1,null,null,null);t["default"]=h.exports}}]);